module.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";"use latest";var r=n(75),o=n(173),i=n(12);i.info("Starting webtask.");var s=null,a=function(e,t){return s||(r.defaults({AUTH0_DOMAIN:e.webtaskContext.secrets.AUTH0_DOMAIN,AUTH0_CLIENT_ID:e.webtaskContext.secrets.AUTH0_CLIENT_ID,AUTH0_CLIENT_SECRET:e.webtaskContext.secrets.AUTH0_CLIENT_SECRET,EXTENSION_SECRET:e.webtaskContext.secrets.EXTENSION_SECRET,NODE_ENV:"production",HOSTING_ENV:"webtask",CLIENT_VERSION:"1.0.0",WT_URL:e.webtaskContext.secrets.WT_URL}),s=n(79)(e.webtaskContext.storage)),s(e,t)};e.exports=o.fromExpress(function(e,t){return a(e,t)})},function(e,t,n){var r=n(48),o=n(16),i=n(76),s=n(141),a={};t.clone=function(e,n){if("object"!=typeof e||null===e)return e;n=n||{orig:[],copy:[]};var r=n.orig.indexOf(e);if(r!==-1)return n.copy[r];var o,i=!1;if(Array.isArray(e))o=[],i=!0;else if(Buffer.isBuffer(e))o=new Buffer(e);else if(e instanceof Date)o=new Date(e.getTime());else if(e instanceof RegExp)o=new RegExp(e);else{var s=Object.getPrototypeOf(e);s&&s.isImmutable?o=e:(o=Object.create(s),i=!0)}if(n.orig.push(e),n.copy.push(o),i)for(var a=Object.getOwnPropertyNames(e),u=0,c=a.length;u<c;++u){var l=a[u],f=Object.getOwnPropertyDescriptor(e,l);f&&(f.get||f.set)?Object.defineProperty(o,l,f):o[l]=t.clone(e[l],n)}return o},t.merge=function(e,n,r,o){if(t.assert(e&&"object"==typeof e,"Invalid target value: must be an object"),t.assert(null===n||void 0===n||"object"==typeof n,"Invalid source value: must be null, undefined, or an object"),!n)return e;if(Array.isArray(n)){t.assert(Array.isArray(e),"Cannot merge array onto an object"),o===!1&&(e.length=0);for(var i=0,s=n.length;i<s;++i)e.push(t.clone(n[i]));return e}for(var a=Object.keys(n),u=0,c=a.length;u<c;++u){var l=a[u],f=n[l];f&&"object"==typeof f?!e[l]||"object"!=typeof e[l]||Array.isArray(e[l])^Array.isArray(f)||f instanceof Date||Buffer.isBuffer(f)||f instanceof RegExp?e[l]=t.clone(f):t.merge(e[l],f,r,o):null!==f&&void 0!==f?e[l]=f:r!==!1&&(e[l]=f)}return e},t.applyToDefaults=function(e,n,r){if(t.assert(e&&"object"==typeof e,"Invalid defaults value: must be an object"),t.assert(!n||n===!0||"object"==typeof n,"Invalid options value: must be true, falsy or an object"),!n)return null;var o=t.clone(e);return n===!0?o:t.merge(o,n,r===!0,!1)},t.cloneWithShallow=function(e,n){if(!e||"object"!=typeof e)return e;var r=a.store(e,n),o=t.clone(e);return a.restore(o,e,r),o},a.store=function(e,n){for(var r={},o=0,i=n.length;o<i;++o){var s=n[o],u=t.reach(e,s);void 0!==u&&(r[s]=u,a.reachSet(e,s,void 0))}return r},a.restore=function(e,t,n){for(var r=Object.keys(n),o=0,i=r.length;o<i;++o){var s=r[o];a.reachSet(e,s,n[s]),a.reachSet(t,s,n[s])}},a.reachSet=function(e,t,n){for(var r=t.split("."),o=e,i=0,s=r.length;i<s;++i){var a=r[i];i+1===s&&(o[a]=n),o=o[a]}},t.applyToDefaultsWithShallow=function(e,n,r){if(t.assert(e&&"object"==typeof e,"Invalid defaults value: must be an object"),t.assert(!n||n===!0||"object"==typeof n,"Invalid options value: must be true, falsy or an object"),t.assert(r&&Array.isArray(r),"Invalid keys"),!n)return null;var o=t.cloneWithShallow(e,r);if(n===!0)return o;var i=a.store(n,r);return t.merge(o,n,!1,!1),a.restore(o,n,i),o},t.deepEqual=function(e,n,r,o){r=r||{prototype:!0};var i=typeof e;if(i!==typeof n)return!1;if("object"!==i||null===e||null===n)return e===n?0!==e||1/e===1/n:e!==e&&n!==n;if(o=o||[],o.indexOf(e)!==-1)return!0;if(o.push(e),Array.isArray(e)){if(!Array.isArray(n))return!1;if(!r.part&&e.length!==n.length)return!1;for(var s=0,a=e.length;s<a;++s){if(r.part){for(var u=!1,c=0,l=n.length;c<l;++c)if(t.deepEqual(e[s],n[c],r,o)){u=!0;break}return u}if(!t.deepEqual(e[s],n[s],r,o))return!1}return!0}if(Buffer.isBuffer(e)){if(!Buffer.isBuffer(n))return!1;if(e.length!==n.length)return!1;for(var f=0,p=e.length;f<p;++f)if(e[f]!==n[f])return!1;return!0}if(e instanceof Date)return n instanceof Date&&e.getTime()===n.getTime();if(e instanceof RegExp)return n instanceof RegExp&&e.toString()===n.toString();if(r.prototype&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(n))return!1;var d=Object.getOwnPropertyNames(e);if(!r.part&&d.length!==Object.getOwnPropertyNames(n).length)return!1;for(var h=0,g=d.length;h<g;++h){var v=d[h],m=Object.getOwnPropertyDescriptor(e,v);if(m.get){if(!t.deepEqual(m,Object.getOwnPropertyDescriptor(n,v),r,o))return!1}else if(!t.deepEqual(e[v],n[v],r,o))return!1}return!0},t.unique=function(e,t){for(var n={},r=[],o=0,i=e.length;o<i;++o){var s=t?e[o][t]:e[o];n[s]!==!0&&(r.push(e[o]),n[s]=!0)}return r},t.mapToObject=function(e,t){if(!e)return null;for(var n={},r=0,o=e.length;r<o;++r)t?e[r][t]&&(n[e[r][t]]=!0):n[e[r]]=!0;return n},t.intersect=function(e,n,r){if(!e||!n)return[];for(var o=[],i=Array.isArray(e)?t.mapToObject(e):e,s={},a=0,u=n.length;a<u;++a)if(i[n[a]]&&!s[n[a]]){if(r)return n[a];o.push(n[a]),s[n[a]]=!0}return r?null:o},t.contain=function(e,n,r){var o=null;"object"!=typeof e||"object"!=typeof n||Array.isArray(e)||Array.isArray(n)?n=[].concat(n):(o=n,n=Object.keys(n)),r=r||{},t.assert(arguments.length>=2,"Insufficient arguments"),t.assert("string"==typeof e||"object"==typeof e,"Reference must be string or an object"),t.assert(n.length,"Values array cannot be empty");var i,s;if(r.deep){i=t.deepEqual;var a=r.hasOwnProperty("only"),u=r.hasOwnProperty("part");s={prototype:a?r.only:!!u&&!r.part,part:a?!r.only:!u||r.part}}else i=function(e,t){return e===t};for(var c=!1,l=new Array(n.length),f=0,p=l.length;f<p;++f)l[f]=0;if("string"==typeof e){var d="(";for(f=0,p=n.length;f<p;++f){var h=n[f];t.assert("string"==typeof h,"Cannot compare string reference to non-string value"),d+=(f?"|":"")+t.escapeRegex(h)}var g=new RegExp(d+")","g"),v=e.replace(g,function(e,t){var r=n.indexOf(t);return++l[r],""});c=!!v}else if(Array.isArray(e))for(f=0,p=e.length;f<p;++f){for(var m=0,y=n.length,b=!1;m<y&&b===!1;++m)b=i(n[m],e[f],s)&&m;b!==!1?++l[b]:c=!0}else{var _=Object.keys(e);for(f=0,p=_.length;f<p;++f){var w=_[f],x=n.indexOf(w);if(x!==-1){if(o&&!i(o[w],e[w],s))return!1;++l[x]}else c=!0}}var k=!1;for(f=0,p=l.length;f<p;++f)if(k=k||!!l[f],r.once&&l[f]>1||!r.part&&!l[f])return!1;return(!r.only||!c)&&k},t.flatten=function(e,n){for(var r=n||[],o=0,i=e.length;o<i;++o)Array.isArray(e[o])?t.flatten(e[o],r):r.push(e[o]);return r},t.reach=function(e,n,r){if(n===!1||null===n||"undefined"==typeof n)return e;r=r||{},"string"==typeof r&&(r={separator:r});for(var o=n.split(r.separator||"."),i=e,s=0,a=o.length;s<a;++s){var u=o[s];if("-"===u[0]&&Array.isArray(i)&&(u=u.slice(1,u.length),u=i.length-u),!i||!i.hasOwnProperty(u)||"object"!=typeof i&&r.functions===!1){t.assert(!r.strict||s+1===a,"Missing segment",u,"in reach path ",n),t.assert("object"==typeof i||r.functions===!0||"function"!=typeof i,"Invalid segment",u,"in reach path ",n),i=r["default"];break}i=i[u]}return i},t.reachTemplate=function(e,n,r){return n.replace(/{([^}]+)}/g,function(n,o){var i=t.reach(e,o,r);return void 0===i||null===i?"":i})},t.formatStack=function(e){for(var t=[],n=0,r=e.length;n<r;++n){var o=e[n];t.push([o.getFileName(),o.getLineNumber(),o.getColumnNumber(),o.getFunctionName(),o.isConstructor()])}return t},t.formatTrace=function(e){for(var t=[],n=0,r=e.length;n<r;++n){var o=e[n];t.push((o[4]?"new ":"")+o[3]+" ("+o[0]+":"+o[1]+":"+o[2]+")")}return t},t.callStack=function(e){var n=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t};var r={};Error.captureStackTrace(r,arguments.callee);var o=r.stack;Error.prepareStackTrace=n;var i=t.formatStack(o);return e?i.slice(e):i},t.displayStack=function(e){var n=t.callStack(void 0===e?1:e+1);return t.formatTrace(n)},t.abortThrow=!1,t.abort=function(e,n){if(t.abortThrow===!0)throw new Error(e||"Unknown error");var r="";n||(r=t.displayStack(1).join("\n\t")),console.log("ABORT: "+e+"\n\t"+r),process.exit(1)},t.assert=function(e){if(!e){if(2===arguments.length&&arguments[1]instanceof Error)throw arguments[1];for(var n=[],r=1,o=arguments.length;r<o;++r)""!==arguments[r]&&n.push(arguments[r]);throw n=n.map(function(e){return"string"==typeof e?e:e instanceof Error?e.message:t.stringify(e)}),new Error(n.join(" ")||"Unknown error")}},t.Timer=function(){this.ts=0,this.reset()},t.Timer.prototype.reset=function(){this.ts=Date.now()},t.Timer.prototype.elapsed=function(){return Date.now()-this.ts},t.Bench=function(){this.ts=0,this.reset()},t.Bench.prototype.reset=function(){this.ts=t.Bench.now()},t.Bench.prototype.elapsed=function(){return t.Bench.now()-this.ts},t.Bench.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.escapeRegex=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")},t.base64urlEncode=function(e,t){var n=Buffer.isBuffer(e)?e:new Buffer(e,t||"binary");return n.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")},t.base64urlDecode=function(e,t){if(e&&!/^[\w\-]*$/.test(e))return new Error("Invalid character");try{var n=new Buffer(e,"base64");return"buffer"===t?n:n.toString(t||"binary")}catch(r){return r}},t.escapeHeaderAttribute=function(e){return t.assert(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(e),"Bad attribute value ("+e+")"),e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},t.escapeHtml=function(e){return s.escapeHtml(e)},t.escapeJavaScript=function(e){return s.escapeJavaScript(e)},t.nextTick=function(e){return function(){var t=arguments;process.nextTick(function(){e.apply(null,t)})}},t.once=function(e){if(e._hoekOnce)return e;var t=!1,n=function(){t||(t=!0,e.apply(null,arguments))};return n._hoekOnce=!0,n},t.isAbsolutePath=function(e,t){return!!e&&(o.isAbsolute?o.isAbsolute(e):(t=t||process.platform,"win32"!==t?"/"===e[0]:!!/^(?:[a-zA-Z]:[\\\/])|(?:[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/])/.test(e)))},t.isInteger=function(e){return"number"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},t.ignore=function(){},t.inherits=i.inherits,t.format=i.format,t.transform=function(e,n,r){if(t.assert(null===e||void 0===e||"object"==typeof e||Array.isArray(e),"Invalid source object: must be null, undefined, an object, or an array"),Array.isArray(e)){for(var o=[],i=0,s=e.length;i<s;++i)o.push(t.transform(e[i],n,r));return o}for(var a={},u=Object.keys(n),c=0,l=u.length;c<l;++c){var f=u[c],p=f.split("."),d=n[f];t.assert("string"==typeof d,'All mappings must be "." delineated strings');for(var h,g=a;p.length>1;)h=p.shift(),g[h]||(g[h]={}),g=g[h];h=p.shift(),g[h]=t.reach(e,d,r)}return a},t.uniqueFilename=function(e,t){t=t?"."!==t[0]?"."+t:t:"",e=o.resolve(e);var n=[Date.now(),process.pid,r.randomBytes(8).toString("hex")].join("-")+t;return o.join(e,n)},t.stringify=function(){try{return JSON.stringify.apply(null,arguments)}catch(e){return"[Cannot display object: "+e.message+"]"}},t.shallow=function(e){for(var t={},n=Object.keys(e),r=0,o=n.length;r<o;++r){var i=n[r];t[i]=e[i]}return t}},function(e,t,n){var r=(n(16),n(1)),o=n(22),i=n(3),s=null,a=null,u={};u.defaults={abortEarly:!0,convert:!0,allowUnknown:!1,skipFunctions:!1,stripUnknown:!1,language:{},presence:"optional",raw:!1,strip:!1},u.checkOptions=function(e){for(var t={abortEarly:"boolean",convert:"boolean",allowUnknown:"boolean",skipFunctions:"boolean",stripUnknown:"boolean",language:"object",presence:["string","required","optional","forbidden","ignore"],raw:"boolean",context:"object",strip:"boolean"},n=Object.keys(e),o=0,i=n.length;o<i;++o){var s,a=n[o],u=t[a],c=u;Array.isArray(u)&&(c=u[0],s=u.slice(1)),r.assert(c,"unknown key "+a),r.assert(typeof e[a]===c,a+" should be of type "+c),s&&r.assert(s.indexOf(e[a])>=0,a+" should be one of "+s.join(", "))}},e.exports=u.Any=function(){this.isJoi=!0,this._type="any",this._settings=null,this._valids=new u.Set,this._invalids=new u.Set,this._tests=[],this._refs=[],this._flags={},this._description=null,this._unit=null,this._notes=[],this._tags=[],this._examples=[],this._meta=[],this._inner={}},u.Any.prototype.isImmutable=!0,u.Any.prototype.clone=function(){var e=Object.create(Object.getPrototypeOf(this));e.isJoi=!0,e._type=this._type,e._settings=u.concatSettings(this._settings),e._valids=r.clone(this._valids),e._invalids=r.clone(this._invalids),e._tests=this._tests.slice(),e._refs=this._refs.slice(),e._flags=r.clone(this._flags),e._description=this._description,e._unit=this._unit,e._notes=this._notes.slice(),e._tags=this._tags.slice(),e._examples=this._examples.slice(),e._meta=this._meta.slice(),e._inner={};for(var t=Object.keys(this._inner),n=0,o=t.length;n<o;++n){var i=t[n];e._inner[i]=this._inner[i]?this._inner[i].slice():null}return e},u.Any.prototype.concat=function(e){r.assert(e&&e.isJoi,"Invalid schema object"),r.assert("any"===e._type||e._type===this._type,"Cannot merge with another type:",e._type);var t=this.clone();t._settings=t._settings?u.concatSettings(t._settings,e._settings):e._settings,t._valids.merge(e._valids,e._invalids),t._invalids.merge(e._invalids,e._valids),t._tests=t._tests.concat(e._tests),t._refs=t._refs.concat(e._refs),r.merge(t._flags,e._flags),t._description=e._description||t._description,t._unit=e._unit||t._unit,t._notes=t._notes.concat(e._notes),t._tags=t._tags.concat(e._tags),t._examples=t._examples.concat(e._examples),t._meta=t._meta.concat(e._meta);for(var n=Object.keys(e._inner),o="object"===t._type,i=0,s=n.length;i<s;++i){var a=n[i],c=e._inner[a];if(c){var l=t._inner[a];if(l)if(o&&"children"===a){for(var f={},p=0,d=l.length;p<d;++p)f[l[p].key]=p;for(p=0,d=c.length;p<d;++p){var h=c[p].key;f[h]>=0?l[f[h]]={key:h,schema:l[f[h]].schema.concat(c[p].schema)}:l.push(c[p])}}else t._inner[a]=t._inner[a].concat(c);else t._inner[a]=c.slice()}}return t},u.Any.prototype._test=function(e,t,n){r.assert(!this._flags.allowOnly,"Cannot define rules when valid values specified");var o=this.clone();return o._tests.push({func:n,name:e,arg:t}),o},u.Any.prototype.options=function(e){r.assert(!e.context,"Cannot override context"),u.checkOptions(e);var t=this.clone();return t._settings=u.concatSettings(t._settings,e),t},u.Any.prototype.strict=function(){var e=this.clone();return e._settings=e._settings||{},e._settings.convert=!1,e},u.Any.prototype.raw=function(e){var t=this.clone();return t._settings=t._settings||{},t._settings.raw=void 0===e||e,t},u.Any.prototype._allow=function(){for(var e=r.flatten(Array.prototype.slice.call(arguments)),t=0,n=e.length;t<n;++t){var o=e[t];this._invalids.remove(o),this._valids.add(o,this._refs)}},u.Any.prototype.allow=function(){var e=this.clone();return e._allow.apply(e,arguments),e},u.Any.prototype.valid=u.Any.prototype.only=u.Any.prototype.equal=function(){r.assert(!this._tests.length,"Cannot set valid values when rules specified");var e=this.allow.apply(this,arguments);return e._flags.allowOnly=!0,e},u.Any.prototype.invalid=u.Any.prototype.disallow=u.Any.prototype.not=function(e){for(var t=this.clone(),n=r.flatten(Array.prototype.slice.call(arguments)),o=0,i=n.length;o<i;++o){var e=n[o];t._valids.remove(e),t._invalids.add(e,this._refs)}return t},u.Any.prototype.required=u.Any.prototype.exist=function(){var e=this.clone();return e._flags.presence="required",e},u.Any.prototype.optional=function(){var e=this.clone();return e._flags.presence="optional",e},u.Any.prototype.forbidden=function(){var e=this.clone();return e._flags.presence="forbidden",e},u.Any.prototype.strip=function(){var e=this.clone();return e._flags.strip=!0,e},u.Any.prototype.applyFunctionToChildren=function(e,t,n,r){if(e=[].concat(e),1!==e.length||""!==e[0]){r=r?r+".":"";var o=(""===e[0]?e.slice(1):e).map(function(e){return r+e});throw new Error("unknown key(s) "+o.join(", "))}return this[t].apply(this,n)},u.Any.prototype["default"]=function(e,t){"function"!=typeof e||o.isRef(e)||(!e.description&&t&&(e.description=t),"func"!==this._type&&r.assert("string"==typeof e.description&&e.description.length>0,"description must be provided when default value is a function"));var n=this.clone();return n._flags["default"]=e,o.push(n._refs,e),n},u.Any.prototype.when=function(e,t){r.assert(t&&"object"==typeof t,"Invalid options"),r.assert(void 0!==t.then||void 0!==t.otherwise,'options must have at least one of "then" or "otherwise"'),a=a||n(21);var o=t.then?this.concat(a.schema(t.then)):this,i=t.otherwise?this.concat(a.schema(t.otherwise)):this;s=s||n(46);var u=s.when(e,{is:t.is,then:o,otherwise:i});return u._flags.presence="ignore",u},u.Any.prototype.description=function(e){r.assert(e&&"string"==typeof e,"Description must be a non-empty string");var t=this.clone();return t._description=e,t},u.Any.prototype.notes=function(e){r.assert(e&&("string"==typeof e||Array.isArray(e)),"Notes must be a non-empty string or array");var t=this.clone();return t._notes=t._notes.concat(e),t},u.Any.prototype.tags=function(e){r.assert(e&&("string"==typeof e||Array.isArray(e)),"Tags must be a non-empty string or array");var t=this.clone();return t._tags=t._tags.concat(e),t},u.Any.prototype.meta=function(e){r.assert(void 0!==e,"Meta cannot be undefined");var t=this.clone();return t._meta=t._meta.concat(e),t},u.Any.prototype.example=function(e){r.assert(arguments.length,"Missing example");var t=this._validate(e,null,u.defaults);r.assert(!t.errors,"Bad example:",t.errors&&i.process(t.errors,e));var n=this.clone();return n._examples=n._examples.concat(e),n},u.Any.prototype.unit=function(e){r.assert(e&&"string"==typeof e,"Unit name must be a non-empty string");var t=this.clone();return t._unit=e,t},u._try=function(e,t){var n,r;try{r=e.call(null,t)}catch(o){n=o}return{value:r,error:n}},u.Any.prototype._validate=function(e,t,n,s){var a=this,c=e;t=t||{key:"",path:"",parent:null,reference:s},this._settings&&(n=u.concatSettings(n,this._settings));var l=[],f=function(){var s;if(!a._flags.strip)if(void 0!==e)s=n.raw?c:e;else if(o.isRef(a._flags["default"]))s=a._flags["default"](t.parent,n);else if("function"!=typeof a._flags["default"]||"func"===a._type&&!a._flags["default"].description)s=a._flags["default"];else{var f;null!==t.parent&&a._flags["default"].length>0&&(f=r.clone(t.parent));var p=u._try(a._flags["default"],f);s=p.value,p.error&&l.push(i.create("any.default",p.error,t,n))}return{value:s,errors:l.length?l:null}},p=this._flags.presence||n.presence;if("optional"===p){if(void 0===e)return f()}else{if("required"===p&&void 0===e)return l.push(i.create("any.required",null,t,n)),f();if("forbidden"===p)return void 0===e?f():(l.push(i.create("any.unknown",null,t,n)),f())}if(this._valids.has(e,t,n,this._flags.insensitive))return f();if(this._invalids.has(e,t,n,this._flags.insensitive)&&(l.push(i.create(""===e?"any.empty":"any.invalid",null,t,n)),n.abortEarly||void 0===e))return f();if(this._base){var d=this._base.call(this,e,t,n);if(d.errors)return e=d.value,l=l.concat(d.errors),f();if(d.value!==e){if(e=d.value,this._valids.has(e,t,n,this._flags.insensitive))return f();if(this._invalids.has(e,t,n,this._flags.insensitive)&&(l.push(i.create("any.invalid",null,t,n)),n.abortEarly))return f()}}if(this._flags.allowOnly&&(l.push(i.create("any.allowOnly",{valids:this._valids.values({stripUndefined:!0})},t,n)),n.abortEarly))return f();for(var h=0,g=this._tests.length;h<g;++h){var v=this._tests[h],m=v.func.call(this,e,t,n);if(m&&(l.push(m),n.abortEarly))return f()}return f()},u.Any.prototype._validateWithOptions=function(e,t,n){t&&u.checkOptions(t);var r=u.concatSettings(u.defaults,t),o=this._validate(e,null,r),s=i.process(o.errors,e);return n?n(s,o.value):{error:s,value:o.value}},u.Any.prototype.validate=function(e,t){var n=this._validate(e,null,u.defaults),r=i.process(n.errors,e);return t?t(r,n.value):{error:r,value:n.value}},u.Any.prototype.describe=function(){var e={type:this._type};Object.keys(this._flags).length&&(e.flags=this._flags),this._description&&(e.description=this._description),this._notes.length&&(e.notes=this._notes),this._tags.length&&(e.tags=this._tags),this._meta.length&&(e.meta=this._meta),this._examples.length&&(e.examples=this._examples),this._unit&&(e.unit=this._unit);var t=this._valids.values();t.length&&(e.valids=t);var n=this._invalids.values();n.length&&(e.invalids=n),e.rules=[];for(var o=0,i=this._tests.length;o<i;++o){var s=this._tests[o],a={name:s.name};void 0!==s.arg&&(a.arg=s.arg),e.rules.push(a)}e.rules.length||delete e.rules;var u=r.reach(this._settings,"language.label");return u&&(e.label=u),e},u.Any.prototype.label=function(e){r.assert(e&&"string"==typeof e,"Label name must be a non-empty string");var t=this.clone(),n={language:{label:e}};return t._settings=u.concatSettings(n,t._settings),t},u.Set=function(){this._set=[]},u.Set.prototype.add=function(e,t){r.assert(null===e||void 0===e||e instanceof Date||Buffer.isBuffer(e)||o.isRef(e)||"function"!=typeof e&&"object"!=typeof e,"Value cannot be an object or function"),"function"!=typeof e&&this.has(e,null,null,!1)||(o.push(t,e),this._set.push(e))},u.Set.prototype.merge=function(e,t){for(var n=0,r=e._set.length;n<r;++n)this.add(e._set[n]);for(n=0,r=t._set.length;n<r;++n)this.remove(t._set[n])},u.Set.prototype.remove=function(e){this._set=this._set.filter(function(t){return e!==t})},u.Set.prototype.has=function(e,t,n,r){for(var i=0,s=this._set.length;i<s;++i){var a=this._set[i];if(o.isRef(a)&&(a=a(t.reference||t.parent,n)),typeof e==typeof a&&(e===a||e instanceof Date&&a instanceof Date&&e.getTime()===a.getTime()||r&&"string"==typeof e&&e.toLowerCase()===a.toLowerCase()||Buffer.isBuffer(e)&&Buffer.isBuffer(a)&&e.length===a.length&&e.toString("binary")===a.toString("binary")))return!0}return!1},u.Set.prototype.values=function(e){if(e&&e.stripUndefined){for(var t=[],n=0,r=this._set.length;n<r;++n){var o=this._set[n];void 0!==o&&t.push(o)}return t}return this._set.slice()},u.concatSettings=function(e,t){if(!e&&!t)return null;var n={};if(e)for(var o=Object.keys(e),i=0,s=o.length;i<s;++i){var a=o[i];n[a]=e[a]}if(t)for(var u=Object.keys(t),c=0,l=u.length;c<l;++c){var a=u[c];"language"===a&&n.hasOwnProperty(a)?n[a]=r.applyToDefaults(n[a],t[a]):n[a]=t[a]}return n}},function(e,t,n){var r=n(1),o=n(149),i={};i.stringify=function(e,t){var n=typeof e;if(null===e)return"null";if("string"===n)return e;if(e instanceof i.Err||"function"===n)return e.toString();if("object"===n){if(Array.isArray(e)){for(var r="",o=0,s=e.length;o<s;++o)r+=(r.length?", ":"")+i.stringify(e[o],t);return t?"["+r+"]":r}return e.toString()}return JSON.stringify(e)},i.Err=function(e,t,n,r){this.type=e,this.context=t||{},this.context.key=n.key,this.path=n.path,this.options=r},i.Err.prototype.toString=function(){var e=this,t=this.options.language;t.label?this.context.key=t.label:""!==this.context.key&&null!==this.context.key||(this.context.key=t.root||o.errors.root);var n=r.reach(t,this.type)||r.reach(o.errors,this.type),s=/\{\{\!?key\}\}/.test(n),a=n.length>2&&"!"===n[0]&&"!"===n[1];a&&(n=n.slice(2)),s||a||(n=(r.reach(t,"key")||r.reach(o.errors,"key"))+n);var u=r.reach(t,"messages.wrapArrays");"boolean"!=typeof u&&(u=o.errors.messages.wrapArrays);var c=n.replace(/\{\{(\!?)([^}]+)\}\}/g,function(t,n,o){var s=r.reach(e.context,o),a=i.stringify(s,u);return n?r.escapeHtml(a):a});return c},t.create=function(e,t,n,r){return new i.Err(e,t,n,r)},t.process=function(e,t){if(!e||!e.length)return null;var n="",r=[],o=function(e,t){for(var s=0,a=e.length;s<a;++s){var u=e[s],c={message:u.toString(),path:i.getPath(u),type:u.type,context:u.context};t||(n+=(n?". ":"")+c.message),u.context.reason&&u.context.reason.length?o(u.context.reason,u.path):r.push(c)}};o(e);var s=new Error(n);return s.name="ValidationError",s.details=r,s._object=t,s.annotate=i.annotate,s},i.getPath=function(e){var t=function(e){var n=r.reach(e,"context.reason.0");return n&&n.context?t(n):e.path};return t(e)||e.context.key},i.annotate=function(){for(var e=r.clone(this._object||{}),t={},n=this.details.length,o=n-1;o>=0;--o)for(var i=n-o,s=this.details[o],a=s.path.split("."),u=e,c=0,l=a.length;c<l&&u;++c){var f=a[c];if(c+1<l)u=u[f];else{var p=u[f];if(void 0!==p){delete u[f];var d=f+"_$key$_"+i+"_$end$_";u[d]=p,t[s.path]=d}else if(t[s.path]){var h=t[s.path],g=h.replace("_$end$_",", "+i+"_$end$_");u[g]=u[h],t[s.path]=g,delete u[h]}else u["_$miss$_"+f+"|"+i+"_$end$_"]="__missing__"}}var v=JSON.stringify(e,null,2);v=v.replace(/_\$key\$_([, \d]+)_\$end\$_\"/g,function(e,t){return'" [31m['+t+"][0m"});var m=v.replace(/\"_\$miss\$_([^\|]+)\|(\d+)_\$end\$_\"\: \"__missing__\"/g,function(e,t,n){return'[41m"'+t+'"[0m[31m ['+n+"]: -- missing --[0m"});for(m+="\n[31m",o=0;o<n;++o)m+="\n["+(o+1)+"] "+this.details[o].message;return m+="[0m"}},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(75),o=null;t.setProvider=function(e){o=e},t["default"]=function(e){return o?o(e):r.get(e)}},function(e,t,n){e.exports=!n(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(17),o=n(56),i=n(43),s=Object.defineProperty;t.f=n(7)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(117),o=n(32);e.exports=function(e){return r(o(e))}},function(e,t){e.exports=require("express")},function(e,t,n){"use strict";var r=n(174);r.emitErrs=!0;var o=new r.Logger({transports:[new r.transports.Console({timestamp:!0,level:"debug",handleExceptions:!0,json:!1,colorize:!0})],exitOnError:!1});e.exports=o,e.exports.stream={write:function(e){o.info(e.replace(/\n$/,""))}}},function(e,t,n){var r=n(5),o=n(4),i=n(54),s=n(14),a="prototype",u=function(e,t,n){var c,l,f,p=e&u.F,d=e&u.G,h=e&u.S,g=e&u.P,v=e&u.B,m=e&u.W,y=d?o:o[t]||(o[t]={}),b=y[a],_=d?r:h?r[t]:(r[t]||{})[a];d&&(n=t);for(c in n)l=!p&&_&&void 0!==_[c],l&&c in y||(f=l?_[c]:n[c],y[c]=d&&"function"!=typeof _[c]?n[c]:v&&l?i(f,r):m&&_[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[a]=e[a],t}(f):g&&"function"==typeof f?i(Function.call,f):f,g&&((y.virtual||(y.virtual={}))[c]=f,e&u.R&&b&&!b[c]&&s(b,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(9),o=n(30);e.exports=n(7)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(40)("wks"),o=n(31),i=n(5).Symbol,s="function"==typeof i,a=e.exports=function(e){return r[e]||(r[e]=s&&i[e]||(s?i:o)("Symbol."+e))};a.store=r},function(e,t){e.exports=require("path")},function(e,t,n){var r=n(19);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(62),o=n(33);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(1),o=n(22),i={any:null,date:n(47),string:n(68),number:n(66),"boolean":n(65),alt:null,object:null};t.schema=function(e){return i.any=i.any||new(n(2)),i.alt=i.alt||n(46),i.object=i.object||n(67),e&&"object"==typeof e?e.isJoi?e:Array.isArray(e)?i.alt["try"](e):e instanceof RegExp?i.string.regex(e):e instanceof Date?i.date.valid(e):i.object.keys(e):"string"==typeof e?i.string.valid(e):"number"==typeof e?i.number.valid(e):"boolean"==typeof e?i["boolean"].valid(e):o.isRef(e)?i.any.valid(e):(r.assert(null===e,"Invalid schema content:",e),i.any.valid(null))},t.ref=function(e){return o.isRef(e)?e:o.create(e)}},function(e,t,n){var r=n(1);t.create=function(e,t){r.assert("string"==typeof e,"Invalid reference key:",e);var n=r.clone(t),o=function(e,t){return r.reach(o.isContext?t.context:e,o.key,n)};return o.isContext=e[0]===(n&&n.contextPrefix||"$"),o.key=o.isContext?e.slice(1):e,o.path=o.key.split(n&&n.separator||"."),o.depth=o.path.length,o.root=o.path[0],o.isJoi=!0,o.toString=function(){return(o.isContext?"context:":"ref:")+o.key},o},t.isRef=function(e){return"function"==typeof e&&e.isJoi},t.push=function(e,n){t.isRef(n)&&!n.isContext&&e.push(n.root)}},function(e,t){e.exports=require("lodash")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.managementClient=t.validateHookToken=t.errorHandler=t.requireUser=t.dashboardAdmins=void 0;var o=n(86),i=r(o),s=n(89),a=r(s),u=n(87),c=r(u),l=n(90),f=r(l),p=n(88),d=r(p);t.dashboardAdmins=i["default"],t.requireUser=a["default"],t.errorHandler=c["default"],t.validateHookToken=f["default"],t.managementClient=d["default"]},function(e,t,n){e.exports={"default":n(107),__esModule:!0}},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=n(100),i=r(o);t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i["default"])(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=n(102),i=r(o),s=n(99),a=r(s),u=n(52),c=r(u);t["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,c["default"])(t)));e.prototype=(0,a["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i["default"]?(0,i["default"])(e,t):e.__proto__=t)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=n(52),i=r(o);t["default"]=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":(0,i["default"])(t))&&"function"!=typeof t?e:t}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){e.exports={}},function(e,t){e.exports=!0},function(e,t,n){var r=n(17),o=n(123),i=n(33),s=n(39)("IE_PROTO"),a=function(){},u="prototype",c=function(){var e,t=n(55)("iframe"),r=i.length,o="<",s=">";for(t.style.display="none",n(116).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(o+"script"+s+"document.F=Object"+o+"/script"+s),e.close(),c=e.F;r--;)delete c[u][i[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(a[u]=r(e),n=new a,a[u]=null,n[s]=e):n=c(),void 0===t?n:o(n,t)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(9).f,o=n(8),i=n(15)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(40)("keys"),o=n(31);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(5),o="__core-js_shared__",i=r[o]||(r[o]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(32);e.exports=function(e){return Object(r(e))}},function(e,t,n){
var r=n(19);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(5),o=n(4),i=n(35),s=n(45),a=n(9).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},function(e,t,n){t.f=n(15)},function(e,t,n){var r=n(1),o=n(2),i=n(21),s=n(22),a=n(3),u={};u.Alternatives=function(){o.call(this),this._type="alternatives",this._invalids.remove(null),this._inner.matches=[]},r.inherits(u.Alternatives,o),u.Alternatives.prototype._base=function(e,t,n){for(var r=[],o=0,i=this._inner.matches.length;o<i;++o){var s=this._inner.matches[o],u=s.schema;if(!u){var c=s.is._validate(s.ref(t.parent,n),null,n,t.parent).errors;if(u=c?s.otherwise:s.then,!u)continue}var l=u._validate(e,t,n);if(!l.errors)return l;r=r.concat(l.errors)}return{errors:r.length?r:a.create("alternatives.base",null,t,n)}},u.Alternatives.prototype["try"]=function(){var e=r.flatten(Array.prototype.slice.call(arguments));r.assert(e.length,"Cannot add other alternatives without at least one schema");for(var t=this.clone(),n=0,o=e.length;n<o;++n){var s=i.schema(e[n]);s._refs.length&&(t._refs=t._refs.concat(s._refs)),t._inner.matches.push({schema:s})}return t},u.Alternatives.prototype.when=function(e,t){r.assert(s.isRef(e)||"string"==typeof e,"Invalid reference:",e),r.assert(t,"Missing options"),r.assert("object"==typeof t,"Invalid options"),r.assert(t.hasOwnProperty("is"),'Missing "is" directive'),r.assert(void 0!==t.then||void 0!==t.otherwise,'options must have at least one of "then" or "otherwise"');var n=this.clone(),o={ref:i.ref(e),is:i.schema(t.is),then:void 0!==t.then?i.schema(t.then):void 0,otherwise:void 0!==t.otherwise?i.schema(t.otherwise):void 0};return s.push(n._refs,o.ref),n._refs=n._refs.concat(o.is._refs),o.then&&o.then._refs&&(n._refs=n._refs.concat(o.then._refs)),o.otherwise&&o.otherwise._refs&&(n._refs=n._refs.concat(o.otherwise._refs)),n._inner.matches.push(o),n},u.Alternatives.prototype.describe=function(){for(var e=o.prototype.describe.call(this),t=[],n=0,r=this._inner.matches.length;n<r;++n){var i=this._inner.matches[n];if(i.schema)t.push(i.schema.describe());else{var s={ref:i.ref.toString(),is:i.is.describe()};i.then&&(s.then=i.then.describe()),i.otherwise&&(s.otherwise=i.otherwise.describe()),t.push(s)}}return e.alternatives=t,e},e.exports=new u.Alternatives},function(e,t,n){var r=n(2),o=n(3),i=n(22),s=n(1),a=n(165),u={};u.isoDate=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\d))$/,u.invalidDate=new Date(""),u.isIsoDate=function(){var e=u.isoDate.toString();return function(t){return t&&t.toString()===e}}(),u.Date=function(){r.call(this),this._type="date"},s.inherits(u.Date,r),u.Date.prototype._base=function(e,t,n){var r={value:n.convert&&u.toDate(e,this._flags.format)||e};return r.value instanceof Date&&!isNaN(r.value.getTime())?r.errors=null:r.errors=o.create(u.isIsoDate(this._flags.format)?"date.isoDate":"date.base",null,t,n),r},u.toDate=function(e,t){if(e instanceof Date)return e;if("string"==typeof e||s.isInteger(e)){"string"==typeof e&&/^[+-]?\d+$/.test(e)&&(e=parseInt(e,10));var n;if(t?u.isIsoDate(t)?n=t.test(e)?new Date(e):u.invalidDate:(n=a(e,t,!0),n=n.isValid()?n.toDate():u.invalidDate):n=new Date(e),!isNaN(n.getTime()))return n}return null},u.compare=function(e,t){return function(n){var r="now"===n,a=i.isRef(n);return r||a||(n=u.toDate(n)),s.assert(n,"Invalid date format"),this._test(e,n,function(i,s,c){var l;if(r)l=Date.now();else if(a){if(l=u.toDate(n(s.parent)),!l)return o.create("date.ref",{ref:n.key},s,c);l=l.getTime()}else l=n.getTime();return t(i.getTime(),l)?null:o.create("date."+e,{limit:new Date(l)},s,c)})}},u.Date.prototype.min=u.compare("min",function(e,t){return e>=t}),u.Date.prototype.max=u.compare("max",function(e,t){return e<=t}),u.Date.prototype.format=function(e){s.assert("string"==typeof e||Array.isArray(e)&&e.every(function(e){return"string"==typeof e}),"Invalid format.");var t=this.clone();return t._flags.format=e,t},u.Date.prototype.iso=function(){var e=this.clone();return e._flags.format=u.isoDate,e},u.Date.prototype._isIsoDate=function(e){return u.isoDate.test(e)},e.exports=new u.Date},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("url")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getForAccessToken=t.getForClient=t.getAccessToken=void 0;var o=n(167),i=r(o),s=n(69),a=r(s),u=n(152),c=r(u),l=n(171),f=r(l),p=n(6),d=r(p),h=n(157);"webtask"===(0,d["default"])("HOSTING_ENV")&&(h=n(158));var g=t.getAccessToken=a["default"].promisify((0,c["default"])({load:function(e,t,n,r){var o={uri:"https://"+e+"/oauth/token",body:{audience:"https://"+e+"/api/v2/",grant_type:"client_credentials",client_id:t,client_secret:n},json:!0};return f["default"].post(o).then(function(e){return r(null,e.access_token)})["catch"](function(e){return r(e)})},hash:function(e,t,n){return e+"/"+t+"/"+n},max:100,maxAge:(0,i["default"])("1h")}));t.getForClient=function(e,t,n){return g(e,t,n).then(function(t){return new h.ManagementClient({domain:e,token:t})})},t.getForAccessToken=function(e,t){return a["default"].resolve(new h.ManagementClient({domain:e,token:t}))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(23),i=(r(o),n(11),n(24),n(156)),s=(n(159),n(161),n(80)),a=null,u=function(){return function(e,t,n){var r={sort:"last_login:-1",q:"app_metadata.invite.status:"+e.query.filter,per_page:e.query.per_page||100,page:e.query.page||0,include_totals:!0,fields:"user_id,name,email,app_metadata",search_engine:"v2"};return e.auth0.users.getAll(r).then(function(n){return t.json({result:n,filter:e.query.filter})})["catch"](n)}},c=function(){return function(e,t){var n=i.v4(),r={connection:e.body.user.connection,email:e.body.user.email,password:i.v4(),app_metadata:{invite:{status:"pending",token:n}}},o={to:r.email},s={name:"Auth0 Customer",email:r.email,url:"/changepassword/"+n},u=null;return e.auth0.users.create(r,function(e,n){return u=n,e?t.status(500).send({error:e?e:"There was an error when creating the user."}):void a.sendEmail(o,s,function(e,n){return e?t.status(500).send({error:e?e:"There was an error when sending the email."}):t.json(u)})})}},l=function(e,t,n){return e.users.update({id:t.user_id},{email_verified:!0}).then(function(e){return e?n(null,e):n({error:"There was a problem when updating the user email_verified field."})})["catch"](n)},f=function(e,t,n){var r={sort:"last_login:-1",q:"app_metadata.invite.token:"+t,include_totals:!1,fields:"user_id,email,email_verified,app_metadata",search_engine:"v2"};return e.users.get(r).then(function(e){return e&&e.length&&1===e.length?n(null,e[0]):n({error:"Token is invalid or user was not found."})})["catch"](n)},p=function(){return function(e,t,n){var r=e.query.token;f(e.auth0,r,function(n,r){return n||!r?t.status(500).send({error:n.error?n.error:"There was an error when validating the token."}):r.email_verified?t.json(r):void l(e.auth0,r,function(e,n){return e?t.status(500).send({error:e.error?e.error:"There was an error when updating field."}):t.json(n)})})}},d=function(){return function(e,t,n){var r=e.body,o=r.id,i=r.password,s=r.token;f(e.auth0,s,function(r,s){return r||!s||s.user_id!==o?t.status(500).send({error:r.error?r.error:"There was an error when saving the user."}):e.auth0.users.update({id:o},{password:i,app_metadata:{invite:{status:"accepted"}}}).then(function(e){return e?t.sendStatus(200):t.status(500).send({error:"There was a problem when saving the user."})})["catch"](n)})}},h=function(e,t){a=new s(e,t)};e.exports={getUsers:u,createUser:c,validateUserToken:p,savePassword:d,configureEmail:h}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var o=n(104),i=r(o),s=n(103),a=r(s),u="function"==typeof a["default"]&&"symbol"==typeof i["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof a["default"]&&e.constructor===a["default"]?"symbol":typeof e};t["default"]="function"==typeof a["default"]&&"symbol"===u(i["default"])?function(e){return"undefined"==typeof e?"undefined":u(e)}:function(e){return e&&"function"==typeof a["default"]&&e.constructor===a["default"]?"symbol":"undefined"==typeof e?"undefined":u(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(112);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(19),o=n(5).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){e.exports=!n(7)&&!n(18)(function(){return 7!=Object.defineProperty(n(55)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";var r=n(35),o=n(13),i=n(64),s=n(14),a=n(8),u=n(34),c=n(119),l=n(38),f=n(61),p=n(15)("iterator"),d=!([].keys&&"next"in[].keys()),h="@@iterator",g="keys",v="values",m=function(){return this};e.exports=function(e,t,n,y,b,_,w){c(n,t,y);var x,k,S,j=function(e){if(!d&&e in O)return O[e];switch(e){case g:return function(){return new n(this,e)};case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}},A=t+" Iterator",T=b==v,E=!1,O=e.prototype,C=O[p]||O[h]||b&&O[b],I=C||j(b),D=b?T?j("entries"):I:void 0,q="Array"==t?O.entries||C:C;if(q&&(S=f(q.call(new e)),S!==Object.prototype&&(l(S,A,!0),r||a(S,p)||s(S,p,m))),T&&C&&C.name!==v&&(E=!0,I=function(){return C.call(this)}),r&&!w||!d&&!E&&O[p]||s(O,p,I),u[t]=I,u[A]=m,b)if(x={values:T?I:j(v),keys:_?I:j(g),entries:D},w)for(k in x)k in O||i(O,k,x[k]);else o(o.P+o.F*(d||E),t,x);return x}},function(e,t,n){var r=n(37),o=n(30),i=n(10),s=n(43),a=n(8),u=n(56),c=Object.getOwnPropertyDescriptor;t.f=n(7)?c:function(e,t){if(e=i(e),t=s(t,!0),u)try{return c(e,t)}catch(n){}if(a(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(62),o=n(33).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(8),o=n(42),i=n(39)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){var r=n(8),o=n(10),i=n(114)(!1),s=n(39)("IE_PROTO");e.exports=function(e,t){var n,a=o(e),u=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;t.length>u;)r(a,n=t[u++])&&(~i(c,n)||c.push(n));return c}},function(e,t,n){var r=n(13),o=n(4),i=n(18);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",s)}},function(e,t,n){e.exports=n(14)},function(e,t,n){var r=n(2),o=n(3),i=n(1),s={};s.Boolean=function(){r.call(this),this._type="boolean"},i.inherits(s.Boolean,r),s.Boolean.prototype._base=function(e,t,n){var r={value:e};if("string"==typeof e&&n.convert){var i=e.toLowerCase();r.value="true"===i||"yes"===i||"on"===i||"false"!==i&&"no"!==i&&"off"!==i&&e}return r.errors="boolean"==typeof r.value?null:o.create("boolean.base",null,t,n),r},e.exports=new s.Boolean},function(e,t,n){var r=n(2),o=n(3),i=n(1),s={};s.Number=function(){r.call(this),this._type="number",this._invalids.add(1/0),this._invalids.add(-(1/0))},i.inherits(s.Number,r),s.Number.prototype._base=function(e,t,n){var r={errors:null,value:e};if("string"==typeof e&&n.convert){var i=parseFloat(e);r.value=isNaN(i)||!isFinite(e)?NaN:i}var s="number"==typeof r.value&&!isNaN(r.value);if(n.convert&&"precision"in this._flags&&s){var a=Math.pow(10,this._flags.precision);r.value=Math.round(r.value*a)/a}return r.errors=s?null:o.create("number.base",null,t,n),r},s.Number.prototype.min=function(e){return i.assert(i.isInteger(e),"limit must be an integer"),this._test("min",e,function(t,n,r){return t>=e?null:o.create("number.min",{limit:e,value:t},n,r)})},s.Number.prototype.max=function(e){return i.assert(i.isInteger(e),"limit must be an integer"),this._test("max",e,function(t,n,r){return t<=e?null:o.create("number.max",{limit:e,value:t},n,r)})},s.Number.prototype.greater=function(e){return i.assert(i.isInteger(e),"limit must be an integer"),this._test("greater",e,function(t,n,r){return t>e?null:o.create("number.greater",{limit:e,value:t},n,r)})},s.Number.prototype.less=function(e){return i.assert(i.isInteger(e),"limit must be an integer"),this._test("less",e,function(t,n,r){return t<e?null:o.create("number.less",{limit:e,value:t},n,r)})},s.Number.prototype.multiple=function(e){return i.assert(i.isInteger(e),"multiple must be an integer"),i.assert(e>0,"multiple must be greater than 0"),this._test("multiple",e,function(t,n,r){return t%e===0?null:o.create("number.multiple",{multiple:e,value:t},n,r)})},s.Number.prototype.integer=function(){return this._test("integer",void 0,function(e,t,n){return i.isInteger(e)?null:o.create("number.integer",{value:e},t,n)})},s.Number.prototype.negative=function(){return this._test("negative",void 0,function(e,t,n){return e<0?null:o.create("number.negative",{value:e},t,n)})},s.Number.prototype.positive=function(){return this._test("positive",void 0,function(e,t,n){return e>0?null:o.create("number.positive",{value:e},t,n)})},s.precisionRx=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,s.Number.prototype.precision=function(e){i.assert(i.isInteger(e),"limit must be an integer"),i.assert(!("precision"in this._flags),"precision already set");var t=this._test("precision",e,function(t,n,r){var i=t.toString().match(s.precisionRx),a=Math.max((i[1]?i[1].length:0)-(i[2]?parseInt(i[2],10):0),0);return a<=e?null:o.create("number.precision",{limit:e,value:t},n,r)});return t._flags.precision=e,t},e.exports=new s.Number},function(e,t,n){var r=n(1),o=n(154),i=n(2),s=n(21),a=n(3),u={};u.Object=function(){i.call(this),this._type="object",this._inner.children=null,this._inner.renames=[],this._inner.dependencies=[],this._inner.patterns=[]},r.inherits(u.Object,i),u.Object.prototype._base=function(e,t,n){var o=e,i=[],s=function(){return{value:o,errors:i.length?i:null}};if("string"==typeof e&&n.convert)try{e=JSON.parse(e)}catch(c){}if(!e||"object"!=typeof e||Array.isArray(e))return i.push(a.create("object.base",null,t,n)),s();if(!(this._inner.renames.length||this._inner.dependencies.length||this._inner.children||this._inner.patterns.length))return o=e,s();if(o===e){o=Object.create(Object.getPrototypeOf(e));for(var l=Object.keys(e),f=0,p=l.length;f<p;++f)o[l[f]]=e[l[f]]}else o=e;for(var d={},h=0,g=this._inner.renames.length;h<g;++h){var v=this._inner.renames[h];if(void 0!==o[v.from]){if(!v.options.multiple&&d[v.to]&&(i.push(a.create("object.rename.multiple",{from:v.from,to:v.to},t,n)),n.abortEarly))return s();if(o.hasOwnProperty(v.to)&&!v.options.override&&!d[v.to]&&(i.push(a.create("object.rename.override",{from:v.from,to:v.to},t,n)),n.abortEarly))return s();o[v.to]=o[v.from],d[v.to]=!0,v.options.alias||delete o[v.from]}}for(var m=0,y=this._inner.dependencies.length;m<y;++m){var b=this._inner.dependencies[m],c=u[b.type](null!==b.key&&e[b.key],b.peers,o,{key:b.key,path:(t.path?t.path+".":"")+(b.key||"")},n);if(c&&(i.push(c),n.abortEarly))return s()}if(!this._inner.children&&!this._inner.patterns.length)return s();var _,w=r.mapToObject(Object.keys(o));if(this._inner.children)for(var x=0,k=this._inner.children.length;x<k;++x){var S=this._inner.children[x],_=S.key,v=o[_];delete w[_];var j={key:_,path:(t.path?t.path+".":"")+_,parent:o,reference:t.reference},A=S.schema._validate(v,j,n);if(A.errors&&(i.push(a.create("object.child",{key:_,reason:A.errors},j,n)),n.abortEarly))return s();S.schema._flags.strip?delete o[_]:void 0!==A.value&&(o[_]=A.value)}var T=Object.keys(w);if(T.length&&this._inner.patterns.length){for(x=0,k=T.length;x<k;++x)for(var _=T[x],E=0,O=this._inner.patterns.length;E<O;++E){var C=this._inner.patterns[E];if(C.regex.test(_)){delete w[_];var v=o[_],j={key:_,path:(t.path?t.path+".":"")+_,parent:o,reference:t.reference},A=C.rule._validate(v,j,n);if(A.errors&&(i.push(a.create("object.child",{key:_,reason:A.errors},j,n)),n.abortEarly))return s();void 0!==A.value&&(o[_]=A.value)}}T=Object.keys(w)}if(T.length){if(n.stripUnknown||n.skipFunctions){for(var I=!1,D=0,q=T.length;D<q;++D)_=T[D],n.stripUnknown?delete o[_]:"function"==typeof o[_]&&(delete w[_],I=!0);if(n.stripUnknown)return s();I&&(T=Object.keys(w))}if(T.length&&(void 0!==this._flags.allowUnknown?!this._flags.allowUnknown:!n.allowUnknown))for(var N=0,P=T.length;N<P;++N)i.push(a.create("object.allowUnknown",null,{key:T[N],path:t.path},n))}return s()},u.Object.prototype.keys=function(e){r.assert(null===e||void 0===e||"object"==typeof e,"Object schema must be a valid object"),r.assert(!e||!e.isJoi,"Object schema cannot be a joi schema");var t=this.clone();if(!e)return t._inner.children=null,t;var n=Object.keys(e);if(!n.length)return t._inner.children=[],t;var i=new o;if(t._inner.children)for(var a=0,u=t._inner.children.length;a<u;++a){var c=t._inner.children[a];i.add(c,{after:c._refs,group:c.key})}for(var l=0,f=n.length;l<f;++l){var p=n[l],c=e[p],d=s.schema(c);i.add({key:p,schema:d},{after:d._refs,group:p})}return t._inner.children=i.nodes,t},u.Object.prototype.unknown=function(e){var t=this.clone();return t._flags.allowUnknown=e!==!1,t},u.Object.prototype.length=function(e){return r.assert(r.isInteger(e)&&e>=0,"limit must be a positive integer"),this._test("length",e,function(t,n,r){return Object.keys(t).length===e?null:a.create("object.length",{limit:e},n,r)})},u.Object.prototype.min=function(e){return r.assert(r.isInteger(e)&&e>=0,"limit must be a positive integer"),this._test("min",e,function(t,n,r){return Object.keys(t).length>=e?null:a.create("object.min",{limit:e},n,r)})},u.Object.prototype.max=function(e){return r.assert(r.isInteger(e)&&e>=0,"limit must be a positive integer"),this._test("max",e,function(t,n,r){return Object.keys(t).length<=e?null:a.create("object.max",{limit:e},n,r)})},u.Object.prototype.pattern=function(e,t){r.assert(e instanceof RegExp,"Invalid regular expression"),r.assert(void 0!==t,"Invalid rule"),e=new RegExp(e.source,e.ignoreCase?"i":void 0);var n=this.clone();return n._inner.patterns.push({regex:e,rule:s.schema(t)}),n},u.Object.prototype["with"]=function(e,t){return this._dependency("with",e,t)},u.Object.prototype.without=function(e,t){return this._dependency("without",e,t)},u.Object.prototype.xor=function(){var e=r.flatten(Array.prototype.slice.call(arguments));return this._dependency("xor",null,e)},u.Object.prototype.or=function(){var e=r.flatten(Array.prototype.slice.call(arguments));return this._dependency("or",null,e)},u.Object.prototype.and=function(){var e=r.flatten(Array.prototype.slice.call(arguments));return this._dependency("and",null,e)},u.Object.prototype.nand=function(){var e=r.flatten(Array.prototype.slice.call(arguments));return this._dependency("nand",null,e)},u.Object.prototype.requiredKeys=function(e){return e=r.flatten(Array.prototype.slice.call(arguments)),this.applyFunctionToChildren(e,"required")},u.Object.prototype.optionalKeys=function(e){return e=r.flatten(Array.prototype.slice.call(arguments)),this.applyFunctionToChildren(e,"optional")},u.renameDefaults={alias:!1,multiple:!1,override:!1},u.Object.prototype.rename=function(e,t,n){r.assert("string"==typeof e,"Rename missing the from argument"),r.assert("string"==typeof t,"Rename missing the to argument"),r.assert(t!==e,"Cannot rename key to same name:",e);for(var o=0,i=this._inner.renames.length;o<i;++o)r.assert(this._inner.renames[o].from!==e,"Cannot rename the same key multiple times");var s=this.clone();return s._inner.renames.push({from:e,to:t,options:r.applyToDefaults(u.renameDefaults,n||{})}),s},u.groupChildren=function(e){e.sort();for(var t={},n=0,o=e.length;n<o;n++){var i=e[n];r.assert("string"==typeof i,"children must be strings");var s=i.split(".")[0],a=t[s]=t[s]||[];a.push(i.substring(s.length+1))}return t},u.Object.prototype.applyFunctionToChildren=function(e,t,n,o){e=[].concat(e),r.assert(e.length>0,"expected at least one children");var i,s=u.groupChildren(e);if(""in s?(i=this[t].apply(this,n),delete s[""]):i=this.clone(),i._inner.children){o=o?o+".":"";for(var a=0,c=i._inner.children.length;a<c;++a){var l=i._inner.children[a],f=s[l.key];f&&(i._inner.children[a]={key:l.key,_refs:l._refs,schema:l.schema.applyFunctionToChildren(f,t,n,o+l.key)},delete s[l.key])}}var p=Object.keys(s);return r.assert(0===p.length,"unknown key(s)",p.join(", ")),i},u.Object.prototype._dependency=function(e,t,n){n=[].concat(n);for(var o=0,i=n.length;o<i;o++)r.assert("string"==typeof n[o],e,"peers must be a string or array of strings");var s=this.clone();return s._inner.dependencies.push({type:e,key:t,peers:n}),s},u["with"]=function(e,t,n,r,o){if(void 0===e)return null;for(var i=0,s=t.length;i<s;++i){var u=t[i];if(!n.hasOwnProperty(u)||void 0===n[u])return a.create("object.with",{peer:u},r,o)}return null},u.without=function(e,t,n,r,o){if(void 0===e)return null;for(var i=0,s=t.length;i<s;++i){var u=t[i];if(n.hasOwnProperty(u)&&void 0!==n[u])return a.create("object.without",{peer:u},r,o)}return null},u.xor=function(e,t,n,r,o){for(var i=[],s=0,u=t.length;s<u;++s){var c=t[s];n.hasOwnProperty(c)&&void 0!==n[c]&&i.push(c)}return 1===i.length?null:0===i.length?a.create("object.missing",{peers:t},r,o):a.create("object.xor",{peers:t},r,o)},u.or=function(e,t,n,r,o){for(var i=0,s=t.length;i<s;++i){var u=t[i];if(n.hasOwnProperty(u)&&void 0!==n[u])return null}return a.create("object.missing",{peers:t},r,o)},u.and=function(e,t,n,r,o){for(var i=[],s=[],u=t.length,c=0;c<u;++c){var l=t[c];n.hasOwnProperty(l)&&void 0!==n[l]?s.push(l):i.push(l)}var f=i.length===u||s.length===u;return f?null:a.create("object.and",{present:s,missing:i},r,o)},u.nand=function(e,t,n,o,i){for(var s=[],u=0,c=t.length;u<c;++u){var l=t[u];n.hasOwnProperty(l)&&void 0!==n[l]&&s.push(l)}var f=r.clone(t),p=f.splice(0,1)[0],d=s.length===t.length;return d?a.create("object.nand",{main:p,peers:f},o,i):null},u.Object.prototype.describe=function(e){var t=i.prototype.describe.call(this);if(this._inner.children&&!e){t.children={};for(var n=0,o=this._inner.children.length;n<o;++n){var s=this._inner.children[n];t.children[s.key]=s.schema.describe()}}if(this._inner.dependencies.length&&(t.dependencies=r.clone(this._inner.dependencies)),this._inner.patterns.length){t.patterns=[];for(var a=0,u=this._inner.patterns.length;a<u;++a){var c=this._inner.patterns[a];t.patterns.push({regex:c.regex.toString(),rule:c.rule.describe()})}}return t},u.Object.prototype.assert=function(e,t,n){e=s.ref(e),r.assert(e.isContext||e.depth>1,"Cannot use assertions for root level references - use direct key rules instead"),n=n||"pass the assertion test";var o=s.schema(t),i=e.path[e.path.length-1],u=e.path.join(".");return this._test("assert",{cast:o,ref:e},function(t,s,c){var l=o._validate(e(t),null,c,t);if(!l.errors)return null;var f=r.merge({},s);return f.key=i,f.path=u,a.create("object.assert",{ref:f.path,message:n},f,c)})},u.Object.prototype.type=function(e,t){return r.assert("function"==typeof e,"type must be a constructor function"),t=t||e.name,this._test("type",t,function(n,r,o){return n instanceof e?null:a.create("object.type",{type:t},r,o)})},e.exports=new u.Object},function(e,t,n){function r(e){var t="0-9",n="["+t+"]",r="a-zA-Z",o="["+r+"]",i=t+"A-Fa-f",s="["+i+"]",a=r+t+"-\\._~",u="%"+i,c="!\\$&'\\(\\)\\*\\+,;=",l=a+u+c+":@",f="["+l+"]",p="|",d="0?",h="(?:"+d+d+n+p+d+"[1-9]"+n+p+"1"+n+n+p+"2[0-4]"+n+p+"25[0-5])",g=o+"["+r+t+"+-\\.]*";e&&(g="(?:"+e+")");var v="["+a+u+c+":]*",m="(?:"+h+"\\.){3}"+h,y=s+"{1,4}",b="(?:"+y+":"+y+"|"+m+")",_="(?:"+y+":){6}"+b,w="::(?:"+y+":){5}"+b,x=y+"::(?:"+y+":){4}"+b,k="(?:"+y+":){0,1}"+y+"::(?:"+y+":){3}"+b,S="(?:"+y+":){0,2}"+y+"::(?:"+y+":){2}"+b,j="(?:"+y+":){0,3}"+y+"::"+y+":"+b,A="(?:"+y+":){0,4}"+y+"::"+b,T="(?:"+y+":){0,5}"+y+"::"+y,E="(?:"+y+":){0,6}"+y+"::",O="(?:"+_+p+w+p+x+p+k+p+S+p+j+p+A+p+T+p+E+")",C="v"+s+"+\\.["+a+c+":]+",I="\\[(?:"+O+p+C+")\\]",D="["+a+u+c+"]{0,255}",q="(?:"+I+p+m+p+D+")",N=n+"*",P="(?:"+v+"@)?"+q+"(?::"+N+")?",U=f+"*",M=f+"+",R="(?:\\/"+U+")*",F="\\/(?:"+M+R+")?",L=M+R,B="(?:\\/\\/"+P+R+p+F+p+L+")",W="["+l+"\\/\\?]*(?=#|$)",H="["+l+"\\/\\?]*";return new RegExp("^"+g+":"+B+"(?:\\?"+W+")?(?:#"+H+")?$")}var o=n(168),i=n(1),s=n(142),a=n(2),u=n(47),c=n(3),l={uriRegex:r(),createUriRegex:r};l.String=function(){a.call(this),this._type="string",this._invalids.add("")},i.inherits(l.String,a),l.String.prototype._base=function(e,t,n){return"string"==typeof e&&n.convert&&(this._flags["case"]&&(e="upper"===this._flags["case"]?e.toLocaleUpperCase():e.toLocaleLowerCase()),this._flags.trim&&(e=e.trim())),{value:e,errors:"string"==typeof e?null:c.create("string.base",{value:e},t,n)}},l.String.prototype.insensitive=function(){var e=this.clone();return e._flags.insensitive=!0,e},l.String.prototype.min=function(e,t){return i.assert(i.isInteger(e)&&e>=0,"limit must be a positive integer"),i.assert(!t||Buffer.isEncoding(t),"Invalid encoding:",t),this._test("min",e,function(n,r,o){var i=t?Buffer.byteLength(n,t):n.length;return i>=e?null:c.create("string.min",{limit:e,value:n},r,o)})},l.String.prototype.max=function(e,t){return i.assert(i.isInteger(e)&&e>=0,"limit must be a positive integer"),i.assert(!t||Buffer.isEncoding(t),"Invalid encoding:",t),this._test("max",e,function(n,r,o){var i=t?Buffer.byteLength(n,t):n.length;return i<=e?null:c.create("string.max",{limit:e,value:n},r,o)})},l.String.prototype.creditCard=function(){return this._test("creditCard",void 0,function(e,t,n){for(var r,o=e.length,i=0,s=1;o--;)r=e.charAt(o)*s,i+=r-9*(r>9),s^=3;var a=i%10===0&&i>0;return a?null:c.create("string.creditCard",{value:e},t,n)})},l.String.prototype.length=function(e,t){return i.assert(i.isInteger(e)&&e>=0,"limit must be a positive integer"),i.assert(!t||Buffer.isEncoding(t),"Invalid encoding:",t),this._test("length",e,function(n,r,o){var i=t?Buffer.byteLength(n,t):n.length;return i===e?null:c.create("string.length",{limit:e,value:n},r,o)})},l.String.prototype.regex=function(e,t){return i.assert(e instanceof RegExp,"pattern must be a RegExp"),e=new RegExp(e.source,e.ignoreCase?"i":void 0),this._test("regex",e,function(n,r,o){return e.test(n)?null:c.create(t?"string.regex.name":"string.regex.base",{name:t,pattern:e,value:n},r,o)})},l.String.prototype.alphanum=function(){return this._test("alphanum",void 0,function(e,t,n){return/^[a-zA-Z0-9]+$/.test(e)?null:c.create("string.alphanum",{value:e},t,n)})},l.String.prototype.token=function(){return this._test("token",void 0,function(e,t,n){return/^\w+$/.test(e)?null:c.create("string.token",{value:e},t,n)})},l.String.prototype.email=function(e){return e&&(i.assert("object"==typeof e,"email options must be an object"),i.assert("undefined"==typeof e.checkDNS,"checkDNS option is not supported"),i.assert("undefined"==typeof e.tldWhitelist||"object"==typeof e.tldWhitelist,"tldWhitelist must be an array or object"),i.assert("undefined"==typeof e.minDomainAtoms||i.isInteger(e.minDomainAtoms)&&e.minDomainAtoms>0,"minDomainAtoms must be a positive integer"),i.assert("undefined"==typeof e.errorLevel||"boolean"==typeof e.errorLevel||i.isInteger(e.errorLevel)&&e.errorLevel>=0,"errorLevel must be a non-negative integer or boolean")),this._test("email",e,function(t,n,r){try{var o=s(t,e);if(o===!0||0===o)return null}catch(i){}return c.create("string.email",{value:t},n,r)})},l.String.prototype.uri=function(e){var t,n=l.uriRegex;return e&&(i.assert("object"==typeof e,"uri options must be an object"),e.scheme&&(i.assert(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array"),Array.isArray(e.scheme)||(e.scheme=[e.scheme]),t=e.scheme.reduce(function(e,t,n){return i.assert(t instanceof RegExp||"string"==typeof t,"scheme at position "+n+" must be a RegExp or String"),e=e?e+"|":"",t instanceof RegExp?e+t.source:(i.assert(/[a-zA-Z][a-zA-Z0-9+-\.]*/.test(t),"scheme at position "+n+" must be a valid scheme"),e+i.escapeRegex(t))},""))),t&&(n=l.createUriRegex(t)),this._test("uri",e,function(e,r,o){return n.test(e)?null:t?c.create("string.uriCustomScheme",{scheme:t,value:e},r,o):c.create("string.uri",{value:e},r,o)})},l.String.prototype.isoDate=function(){return this._test("isoDate",void 0,function(e,t,n){return u._isIsoDate(e)?null:c.create("string.isoDate",{value:e},t,n)})},l.String.prototype.guid=function(){var e=/^[A-F0-9]{8}(?:-?[A-F0-9]{4}){3}-?[A-F0-9]{12}$/i,t=/^\{[A-F0-9]{8}(?:-?[A-F0-9]{4}){3}-?[A-F0-9]{12}\}$/i;return this._test("guid",void 0,function(n,r,o){return e.test(n)||t.test(n)?null:c.create("string.guid",{value:n},r,o)})},l.String.prototype.hex=function(){var e=/^[a-f0-9]+$/i;return this._test("guid",e,function(t,n,r){return e.test(t)?null:c.create("string.hex",{value:t},n,r)})},l.String.prototype.hostname=function(){var e=/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/;return this._test("hostname",void 0,function(t,n,r){return t.length<=255&&e.test(t)||o.isIPv6(t)?null:c.create("string.hostname",{value:t},n,r)})},l.String.prototype.lowercase=function(){var e=this._test("lowercase",void 0,function(e,t,n){return n.convert||e===e.toLocaleLowerCase()?null:c.create("string.lowercase",{value:e},t,n)});return e._flags["case"]="lower",e},l.String.prototype.uppercase=function(e){var t=this._test("uppercase",void 0,function(e,t,n){return n.convert||e===e.toLocaleUpperCase()?null:c.create("string.uppercase",{value:e},t,n)});return t._flags["case"]="upper",t},l.String.prototype.trim=function(){var e=this._test("trim",void 0,function(e,t,n){return n.convert||e===e.trim()?null:c.create("string.trim",{value:e},t,n)});return e._flags.trim=!0,e},e.exports=new l.String},function(e,t){e.exports=require("bluebird")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("ejs")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("lru-cache")},function(e,t){e.exports=require("nconf")},function(e,t){e.exports=require("util")},function(e,t,n){function r(e){return e=e.match(/.{1,64}/g).join("\n"),e="-----BEGIN CERTIFICATE-----\n"+e,e+="\n-----END CERTIFICATE-----\n"}var o=n(74),i=n(170),s=n(23),a={max:5242880,length:function(e){return e.length},maxAge:3e5},u=o(a);e.exports=function(e){return e=e||{},e.strictSSL="undefined"==typeof e.strictSSL||e.strictSSL,function(t,n,o,a){var c=o.iss+"|"+o.aud,l=u.get(c);if(l)return a(null,l);switch(n.alg){case"RS256":var f=o.iss+".well-known/jwks.json";i.get(f,{json:!0,strictSSL:e.strictSSL},function(e,t,i){if(e)return a(e);if(200!==t.statusCode)return a(new Error("Failed to obtain JWKS from "+o.iss));var l=s.find(i.keys,function(e){return e.kid==n.kid});if(!l)return a(new Error("Failed to obtain signing key used by "+o.iss));var f=r(l.x5c[0]);return u.set(c,f),a(null,f)});break;default:return a(new Error("Unsupported JWT algorithm: "+n.alg))}}}},function(e,t,n){function r(e){return e&&"[object Function]"==h.call(e)}function o(e){return function(t,n,r){d.get(e+"/userinfo").set("Authorization","Bearer "+t.body.access_token).end(function(e,o){return e?void n.redirect(n.locals.baseUrl):(t.userInfo=o.body,void r())})}}function i(e,t){return function(n,o,i){var s=e;r(e)&&(s=e(n)),n.apiToken=p.sign(n.userInfo,s,{algorithm:"HS256",issuer:o.locals.baseUrl,expiresIn:t}),delete n.userinfo,i()}}var s=n(11),a=n(164),u=n(163),c=n(49),l=n(77),f=n(70),p=n(73),d=n(172),h={}.toString;
e.exports=function(e){var t=864e5,r=s.Router(),p=function(e,t,n){n()},d=[p];return e=e||{},e.clientName=e.clientName||"Auth0 Extension",e.clientId=e.clientId,e.exp=e.exp||t,e.credentialsRequired="undefined"!=typeof e.credentialsRequired&&e.credentialsRequired,e.scopes=e.scopes+" openid profile",e.responseType=e.responseType||"token",e.tokenExpiresIn=e.tokenExpiresIn||"10h",e.rootTenantAuthority=e.rootTenantAuthority||"https://auth0.auth0.com",e.authenticatedCallback=e.authenticatedCallback||function(e,t,n,r){r()},e.apiToken&&!e.apiToken.secret&&(console.log('You are using a "development secret" for API token generation. Please setup your secret on "apiToken.secret".'),e.apiToken.secret=n(48).randomBytes(32).toString("hex")),e.apiToken&&e.apiToken.secret&&(d=[o(e.rootTenantAuthority),e.apiToken.payload||p,i(e.apiToken.secret,e.tokenExpiresIn)]),r.use(function(e,t,n){var r="https",o=c.parse(e.originalUrl).pathname.replace(e.path,"");t.locals.baseUrl=c.format({protocol:r,host:e.get("host"),pathname:o}),n()}),r.use(f.urlencoded({extended:!1})),r.use(u({secret:l(),algorithms:["RS256"],credentialsRequired:e.credentialsRequired}).unless({path:["/login","/callback"]})),r.get("/login",function(t,n){var r=n.locals.baseUrl+"/callback";t.query.returnTo&&(r+="?returnTo="+encodeURIComponent(t.query.returnTo));var o;if("string"==typeof e.audience)o="&audience="+encodeURIComponent(e.audience);else if("function"==typeof e.audience){var i=e.audience(t);"string"==typeof i&&(o="&audience="+encodeURIComponent(i))}var s=[e.rootTenantAuthority+"/i/oauth2/authorize","?client_id="+(e.clientId||n.locals.baseUrl),"&response_type="+e.responseType,"&response_mode=form_post","&scope="+encodeURIComponent(e.scopes),"&expiration="+e.exp,"&redirect_uri="+r,o].join("");n.redirect(s)}),r.get("/logout",function(t,n){var r=["html","  head","    script.","      sessionStorage.removeItem('token')","      sessionStorage.removeItem('apiToken')","      window.location.href = '"+e.rootTenantAuthority+"/v2/logout?returnTo=#{baseUrl}';","  body"].join("\n"),o=a.compile(r)({baseUrl:n.locals.baseUrl});n.header("Content-Type","text/html"),n.status(200).send(o)}),r.post("/callback",d,function(t,n){e.authenticatedCallback(t,n,t.body.access_token,function(e){if(e)return n.sendStatus(500);var r=["html","  head","    script.","      sessionStorage.setItem('token', '"+t.body.access_token+"');",1===d.length?"":"      sessionStorage.setItem('apiToken', '"+t.apiToken+"');","      window.location.href = '#{returnTo}';","  body"].join("\n"),o=a.compile(r)({returnTo:t.query.returnTo?t.query.returnTo:n.locals.baseUrl});n.header("Content-Type","text/html"),n.status(200).send(o)})}),r.get("/.well-known/oauth2-client-configuration",function(t,n){n.header("Content-Type","application/json"),n.status(200).send({redirect_uris:[n.locals.baseUrl+"/callback"],client_name:e.clientName,post_logout_redirect_uris:[n.locals.baseUrl]})}),r}},function(e,t,n){(function(t){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}var i=n(16),s=o(i),a=n(166),u=o(a),c=n(11),l=o(c),f=n(70),p=o(f),d=n(96),h=o(d),g=n(12),v=o(g),m=n(24),y=r(m);e.exports=function(e){var n=new l["default"];return n.use((0,u["default"])(":method :url :status :response-time ms - :res[content-length]",{stream:v["default"].stream})),n.use(p["default"].json({verify:function(e,t,n,r){n&&n.length&&(e.rawBody=n.toString(r||"utf8"))}})),n.use(p["default"].urlencoded({extended:!1})),n.use("/app",l["default"]["static"](s["default"].join(t,"../dist"))),n.use("/",(0,h["default"])(e)),n.use(y.errorHandler),n}}).call(t,"/")},function(e,t,n){"use strict";function r(e,t,n){i(e,t,n)}var o,i,s=n(169);e.exports=function(e,t){return o=s.createTransport(e),i=o.templateSender(t),{sendEmail:r}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(25),i=r(o),s=n(26),a=r(s),u=n(27),c=r(u),l=n(29),f=r(l),p=n(28),d=r(p),h=function(e){function t(e){(0,a["default"])(this,t);var n=(0,f["default"])(this,(0,i["default"])(t).call(this,e));return Error.captureStackTrace(n,n.constructor),n.message=e,n.name="ArgumentError",n}return(0,d["default"])(t,e),(0,c["default"])(t,[{key:"toString",value:function(){return"ArgumentError"}}]),t}(Error);t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(25),i=r(o),s=n(26),a=r(s),u=n(27),c=r(u),l=n(29),f=r(l),p=n(28),d=r(p),h=function(e){function t(e){(0,a["default"])(this,t);var n=(0,f["default"])(this,(0,i["default"])(t).call(this,e));return Error.captureStackTrace(n,n.constructor),n.message=e,n.statusCode=404,n.name="NotFoundError",n}return(0,d["default"])(t,e),(0,c["default"])(t,[{key:"toString",value:function(){return"NotFoundError"}}]),t}(Error);t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(25),i=r(o),s=n(26),a=r(s),u=n(27),c=r(u),l=n(29),f=r(l),p=n(28),d=r(p),h=function(e){function t(e){(0,a["default"])(this,t);var n=(0,f["default"])(this,(0,i["default"])(t).call(this,e));return Error.captureStackTrace(n,n.constructor),n.message=e,n.statusCode=401,n.name="UnauthorizedError",n}return(0,d["default"])(t,e),(0,c["default"])(t,[{key:"toString",value:function(){return"UnauthorizedError"}}]),t}(Error);t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(25),i=r(o),s=n(26),a=r(s),u=n(27),c=r(u),l=n(29),f=r(l),p=n(28),d=r(p),h=function(e){function t(e){(0,a["default"])(this,t);var n=(0,f["default"])(this,(0,i["default"])(t).call(this,e));return Error.captureStackTrace(n,n.constructor),n.message=e,n.name="ValidationError",n}return(0,d["default"])(t,e),(0,c["default"])(t,[{key:"toString",value:function(){return"ValidationError"}}]),t}(Error);t["default"]=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationError=t.UnauthorizedError=t.NotFoundError=t.ArgumentError=void 0;var o=n(81),i=r(o),s=n(82),a=r(s),u=n(83),c=r(u),l=n(84),f=r(l);t.ArgumentError=i["default"],t.NotFoundError=a["default"],t.UnauthorizedError=c["default"],t.ValidationError=f["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(49),i=r(o),s=n(78),a=r(s),u=n(6),c=r(u);t["default"]=function(){var e={credentialsRequired:!1,clientName:"Invite Only Extension",audience:function(){return"https://"+(0,c["default"])("AUTH0_DOMAIN")+"/api/v2/"}},t=(0,a["default"])(e);return function(n,r,o){var s="https",a=i["default"].parse(n.originalUrl).pathname.replace(n.path,""),u=i["default"].format({protocol:s,host:n.get("host"),pathname:a});return e.clientId=u,t(n,r,o)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(12),i=r(o);e.exports=function(e,t,n,r){return i["default"].error(e),e&&"NotFoundError"===e.name?(n.status(404),n.json({error:e.message})):e&&"ValidationError"===e.name?(n.status(400),n.json({error:e.message})):(n.status(e.statusCode||500),void n.json({message:e.message}))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(6),i=r(o),s=n(50);e.exports=function(e,t,n){(0,s.getForClient)((0,i["default"])("AUTH0_DOMAIN"),(0,i["default"])("AUTH0_CLIENT_ID"),(0,i["default"])("AUTH0_CLIENT_SECRET")).then(function(t){e.auth0=t,n()})["catch"](function(e){n(e)})}},function(e,t,n){"use strict";var r=n(85);e.exports=function(e,t,n){return e.user?n():n(new r.UnauthorizedError("Authentication required for this endpoint."))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(16),i=(r(o),n(73)),s=r(i),a=n(6),u=r(a),c=n(12),l=r(c);e.exports=function(e){return function(t,n,r){if(t.headers.authorization&&"Bearer"===t.headers.authorization.split(" ")[0]){var o=t.headers.authorization.split(" ")[1];l["default"].debug("Extension Hook validation token:",o);var i=s["default"].verify(o,(0,u["default"])("EXTENSION_SECRET"),{audience:""+(0,u["default"])("WT_URL")+e,issuer:"https://"+(0,u["default"])("AUTH0_DOMAIN")});return i?r():(l["default"].error("Invalid hook token:",o),n.sendStatus(401))}return l["default"].error("Hook token is missing."),n.sendStatus(401)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.writeSMTPConfig=t.writeTemplateConfig=t.writeStorage=t.readStorage=void 0;var o=n(23),i=(r(o),n(69)),s=r(i),a=n(12),u=r(a),c={templateConfig:{subject:"Welcome to Auth0",message:'<h3>Welcome {{ email }}!\nYou were invited to join Auth0.\nClick <a href="{{ url }}">here</a> to set your password.</h3>'},smtpConfig:{}},l=t.readStorage=function(e){return e?new s["default"](function(t,n){e.get(function(e,r){if(e)return n(e);var o=r||c;return t(o)})}):(u["default"].debug("Unable to read storage. Context not available."),s["default"].resolve(c))},f=t.writeStorage=function(e,t){return e?new s["default"](function(n,r){e.set(t,{force:1},function(e){return e?r(e):n(t)})}):(u["default"].debug("Unable to write storage. Context not available."),s["default"].resolve(t))};t.writeTemplateConfig=function(e,t){var n={from:t.from,subject:t.subject,redirectTo:t.redirectTo,html:t.message};return l(e).then(function(e){return e.smtpConfig=e.smtpConfig||{},e.templateConfig=n||{},e}).then(function(t){return f(e,t)})},t.writeSMTPConfig=function(e,t){return l(e).then(function(e){return e.templateConfig=e.templateConfig||{},e.smtpConfig=t||{},e}).then(function(t){return f(e,t)})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){if(!e.is("application/json"))return t.status(500).send({error:"Missing JSON information about user."});var r={email:e.body.user.email};f.validate(r,p,function(e,r){return e?t.status(500).send({error:e}):void n()})}function i(e,t,n){f.validate({filter:e.query.filter},d,function(r,o){return r?t.status(500).send({error:r,filter:e.query.filter}):void n()})}function s(e,t,n){f.validate(e.query,h,function(e,r){return e?t.status(500).send({error:"No token was provided."}):void n()})}function a(e,t,n){console.log(e.body),f.validate(e.body,g,function(e,r){return e?t.status(500).send({error:"Missing information (user id, token or password)."}):void n()})}function u(e,t,n){f.validate(e.body,v,function(e,r){return e?t.status(500).send({error:"Missing information (from, subject, redirectTo or message)."}):void n()})}function c(e,t,n){f.validate(e.body,m,function(e,r){return e?t.status(500).send({error:"Missing information (host, port, user or password)."}):void n()})}var l=n(51),f=(r(l),n(144)),p=f.object().keys({email:f.string().email().required()}),d=(f.object().keys({csv:f.string().required()}),f.object().keys({filter:f.string().valid("pending","accepted")})),h=f.object().keys({token:f.string().required()}),g=f.object().keys({id:f.string().required(),password:f.string().required(),token:f.string().required()}),v=f.object().keys({from:f.string().email().required(),subject:f.string().required(),redirectTo:f.string().required(),message:f.string().required()}),m=f.object().keys({host:f.string().required(),port:f.number().required(),secure:f["boolean"]().required(),auth:f.object().keys({user:f.string().required(),pass:f.string().required()})});e.exports={validateInviteUser:o,validateInvitations:i,validateUserToken:s,validateSavePassword:a,validateWriteTemplateConfig:u,validateWriteSMTPConfig:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),i=r(o),s=n(11);t["default"]=function(){var e=(0,s.Router)();return e.get("/",function(e,t,n){e.auth0.connections.getAll({fields:"name",strategy:"auth0"}).then(function(e){return i["default"].chain(e).sortBy(function(e){return e.name.toLowerCase()}).value()}).then(function(e){return i["default"].map(e,"name")}).then(function(e){return t.json(e)})["catch"](n)}),e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=n(6),s=r(i),a=n(12),u=r(a),c=n(50),l=n(24);t["default"]=function(){var e=(0,o.Router)();return e.use("/on-uninstall",(0,l.validateHookToken)("/.extensions/on-uninstall")),e["delete"]("/on-uninstall",function(e,t){u["default"].debug("Uninstall running..."),(0,c.getForClient)((0,s["default"])("AUTH0_DOMAIN"),(0,s["default"])("AUTH0_CLIENT_ID"),(0,s["default"])("AUTH0_CLIENT_SECRET")).then(function(e){return e.clients["delete"]({client_id:(0,s["default"])("AUTH0_CLIENT_ID")})}).then(function(){u["default"].debug("Deleted client "+(0,s["default"])("AUTH0_CLIENT_ID")),t.sendStatus(204)})["catch"](function(e){u["default"].debug("Error deleting client "+(0,s["default"])("AUTH0_CLIENT_ID")),u["default"].error(e),t.sendStatus(500)})}),e}},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(72),i=r(o),s=n(49),a=r(s),u=n(71),c=r(u),l=n(16),f=r(l),p=n(6),d=r(p);t["default"]=function(){var t='\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n    <title>Auth0 - User Invitations</title>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <link rel="shortcut icon" href="https://cdn.auth0.com/styleguide/4.6.13/lib/logos/img/favicon.png">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styles/zocial.min.css">\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/manage/v0.3.1715/css/index.min.css">\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styleguide/4.6.13/index.css">\n    <% if (assets.style) { %><link rel="stylesheet" type="text/css" href="/app/<%= assets.style %>"><% } %>\n    <% if (assets.version) { %><link rel="stylesheet" type="text/css" href="//cdn.auth0.com/extensions/auth0-user-invite-extension/assets/auth0-user-invite-extension.ui.<%= assets.version %>.css"><% } %>\n  </head>\n  <body class="a0-extension">\n    <div id="app"></div>\n    <script type="text/javascript" src="//cdn.auth0.com/js/lock-9.0.min.js"></script>\n    <script type="text/javascript" src="//cdn.auth0.com/manage/v0.3.1715/js/bundle.js"></script>\n    <script type="text/javascript">window.config = <%- JSON.stringify(config) %>;</script>\n    <% if (assets.vendors) { %><script type="text/javascript" src="/app/<%= assets.vendors %>"></script><% } %>\n    <% if (assets.app) { %><script type="text/javascript" src="/app/<%= assets.app %>"></script><% } %>\n    <% if (assets.version) { %>\n    <script type="text/javascript" src="//cdn.auth0.com/extensions/auth0-user-invite-extension/assets/auth0-user-invite-extension.ui.vendors.<%= assets.version %>.js"></script>\n    <script type="text/javascript" src="//cdn.auth0.com/extensions/auth0-user-invite-extension/assets/auth0-user-invite-extension.ui.<%= assets.version %>.js"></script>\n    <% } %>\n  </body>\n  </html>\n  ';return function(n,r){var o={AUTH0_DOMAIN:(0,d["default"])("AUTH0_DOMAIN"),BASE_URL:a["default"].format({protocol:"production"!==(0,d["default"])("NODE_ENV")?"http":"https",host:n.get("host"),pathname:a["default"].parse(n.originalUrl||"").pathname.replace(n.path,"")}),BASE_PATH:a["default"].parse(n.originalUrl||"").pathname.replace(n.path,"")+("/admins"===n.path?"/admins":"")},s=(0,d["default"])("CLIENT_VERSION");return s?r.send(c["default"].render(t,{config:o,assets:{version:s}})):i["default"].readFile(f["default"].join(e,"../../dist/manifest.json"),"utf8",function(e,n){var i={config:o,assets:{app:"bundle.js"}};!e&&n&&(i.assets=JSON.parse(n)),r.send(c["default"].render(t,i))})}}}).call(t,"/")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(101),i=r(o),s=n(11),a=n(95),u=r(a),c=n(98),l=r(c),f=n(97),p=r(f),d=n(94),h=r(d),g=n(6),v=(r(g),n(91)),m=n(24),y=n(153),b=r(y),_=n(92),w=r(_),x=n(51),k=r(x),S=n(93),j=r(S),A=function(e){var t=e.smtpConfig;t&&0!=(0,i["default"])(t)||(t=(0,b["default"])()),k["default"].configureEmail(t,e.templateConfig)};t["default"]=function(e){(0,v.readStorage)(e).then(function(e){A(e)});var t=(0,s.Router)();return t.use("/.extensions",(0,h["default"])()),t.use("/",(0,m.dashboardAdmins)()),t.get("/",(0,u["default"])()),t.get("/configuration",(0,u["default"])()),t.get("/changepassword/*",(0,l["default"])()),t.use("/meta",(0,p["default"])()),t.use(m.managementClient),t.get("/api/config/template",m.requireUser,function(t,n){(0,v.readStorage)(e).then(function(e){n.json(e.templateConfig||{})})}),t.patch("/api/config/template",m.requireUser,w["default"].validateWriteTemplateConfig,function(t,n){(0,v.writeTemplateConfig)(e,t.body).then(function(e){A(e),n.sendStatus(200)})}),t.get("/api/config/smtp",m.requireUser,function(t,n){(0,v.readStorage)(e).then(function(e){n.json(e.smtpConfig||{})})}),t.patch("/api/config/smtp",m.requireUser,w["default"].validateWriteSMTPConfig,function(t,n){(0,v.writeSMTPConfig)(e,t.body).then(function(e){A(e),n.sendStatus(200)})}),t.use("/api/connections",m.requireUser,(0,j["default"])()),t.post("/api/invitations/user",m.requireUser,w["default"].validateInviteUser,k["default"].createUser()),t.get("/api/invitations",m.requireUser,w["default"].validateInvitations,k["default"].getUsers()),t.put("/api/changepassword",w["default"].validateUserToken,k["default"].validateUserToken()),t.post("/api/changepassword",w["default"].validateSavePassword,k["default"].savePassword()),t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=r(o),s=n(151),a=r(s);t["default"]=function(){var e=i["default"].Router();return e.get("/",function(e,t){t.status(200).send(a["default"])}),e}},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(71),i=r(o),s=n(72),a=n(16),u=r(a);t["default"]=function(){var t=(0,s.readFileSync)(u["default"].join(e,"./formTemplate.html"),"utf-8"),n=(0,s.readFileSync)(u["default"].join(e,"./changePassword.html"),"utf-8");return function(e,r){r.send(i["default"].render(n,{formTemplate:t.split(/\n/g).join("")},{escape:!1}))}}}).call(t,"/")},function(e,t,n){e.exports={"default":n(105),__esModule:!0}},function(e,t,n){e.exports={"default":n(106),__esModule:!0}},function(e,t,n){e.exports={"default":n(108),__esModule:!0}},function(e,t,n){e.exports={"default":n(109),__esModule:!0}},function(e,t,n){e.exports={"default":n(110),__esModule:!0}},function(e,t,n){e.exports={"default":n(111),__esModule:!0}},function(e,t,n){n(130);var r=n(4).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){n(131);var r=n(4).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){n(132),e.exports=n(4).Object.getPrototypeOf},function(e,t,n){n(133),e.exports=n(4).Object.keys},function(e,t,n){n(134),e.exports=n(4).Object.setPrototypeOf},function(e,t,n){n(137),n(135),n(138),n(139),e.exports=n(4).Symbol},function(e,t,n){n(136),n(140),e.exports=n(45).f("iterator")},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(10),o=n(128),i=n(127);e.exports=function(e){return function(t,n,s){var a,u=r(t),c=o(u.length),l=i(s,c);if(e&&n!=n){for(;c>l;)if(a=u[l++],a!=a)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(20),o=n(60),i=n(37);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var s,a=n(e),u=i.f,c=0;a.length>c;)u.call(e,s=a[c++])&&t.push(s);return t}},function(e,t,n){e.exports=n(5).document&&document.documentElement},function(e,t,n){var r=n(53);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(53);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){"use strict";var r=n(36),o=n(30),i=n(38),s={};n(14)(s,n(15)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(s,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(20),o=n(10);e.exports=function(e,t){for(var n,i=o(e),s=r(i),a=s.length,u=0;a>u;)if(i[n=s[u++]]===t)return n}},function(e,t,n){var r=n(31)("meta"),o=n(19),i=n(8),s=n(9).f,a=0,u=Object.isExtensible||function(){return!0},c=!n(18)(function(){return u(Object.preventExtensions({}))}),l=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},p=function(e,t){if(!i(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},d=function(e){return c&&h.NEED&&u(e)&&!i(e,r)&&l(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:p,onFreeze:d}},function(e,t,n){var r=n(9),o=n(17),i=n(20);e.exports=n(7)?Object.defineProperties:function(e,t){o(e);for(var n,s=i(t),a=s.length,u=0;a>u;)r.f(e,n=s[u++],t[n]);return e}},function(e,t,n){var r=n(10),o=n(59).f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return o(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==i.call(e)?a(e):o(r(e))}},function(e,t,n){var r=n(19),o=n(17),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(54)(Function.call,n(58).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},function(e,t,n){var r=n(41),o=n(32);e.exports=function(e){return function(t,n){var i,s,a=String(o(t)),u=r(n),c=a.length;return u<0||u>=c?e?"":void 0:(i=a.charCodeAt(u),i<55296||i>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?e?a.charAt(u):i:e?a.slice(u,u+2):(i-55296<<10)+(s-56320)+65536)}}},function(e,t,n){var r=n(41),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(41),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){"use strict";var r=n(113),o=n(120),i=n(34),s=n(10);e.exports=n(57)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var r=n(13);r(r.S,"Object",{create:n(36)})},function(e,t,n){var r=n(13);r(r.S+r.F*!n(7),"Object",{defineProperty:n(9).f})},function(e,t,n){var r=n(42),o=n(61);n(63)("getPrototypeOf",function(){return function(e){return o(r(e))}})},function(e,t,n){var r=n(42),o=n(20);n(63)("keys",function(){return function(e){return o(r(e))}})},function(e,t,n){var r=n(13);r(r.S,"Object",{setPrototypeOf:n(125).set})},function(e,t){},function(e,t,n){"use strict";var r=n(126)(!0);n(57)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var r=n(5),o=n(8),i=n(7),s=n(13),a=n(64),u=n(122).KEY,c=n(18),l=n(40),f=n(38),p=n(31),d=n(15),h=n(45),g=n(44),v=n(121),m=n(115),y=n(118),b=n(17),_=n(10),w=n(43),x=n(30),k=n(36),S=n(124),j=n(58),A=n(9),T=n(20),E=j.f,O=A.f,C=S.f,I=r.Symbol,D=r.JSON,q=D&&D.stringify,N="prototype",P=d("_hidden"),U=d("toPrimitive"),M={}.propertyIsEnumerable,R=l("symbol-registry"),F=l("symbols"),L=l("op-symbols"),B=Object[N],W="function"==typeof I,H=r.QObject,$=!H||!H[N]||!H[N].findChild,z=i&&c(function(){return 7!=k(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=E(B,t);r&&delete B[t],O(e,t,n),r&&e!==B&&O(B,t,r)}:O,X=function(e){var t=F[e]=k(I[N]);return t._k=e,t},J=W&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},Q=function(e,t,n){return e===B&&Q(L,t,n),b(e),t=w(t,!0),b(n),o(F,t)?(n.enumerable?(o(e,P)&&e[P][t]&&(e[P][t]=!1),n=k(n,{enumerable:x(0,!1)})):(o(e,P)||O(e,P,x(1,{})),e[P][t]=!0),z(e,t,n)):O(e,t,n)},V=function(e,t){b(e);for(var n,r=m(t=_(t)),o=0,i=r.length;i>o;)Q(e,n=r[o++],t[n]);return e},Z=function(e,t){return void 0===t?k(e):V(k(e),t)},G=function(e){var t=M.call(this,e=w(e,!0));return!(this===B&&o(F,e)&&!o(L,e))&&(!(t||!o(this,e)||!o(F,e)||o(this,P)&&this[P][e])||t)},K=function(e,t){if(e=_(e),t=w(t,!0),e!==B||!o(F,t)||o(L,t)){var n=E(e,t);return!n||!o(F,t)||o(e,P)&&e[P][t]||(n.enumerable=!0),n}},Y=function(e){for(var t,n=C(_(e)),r=[],i=0;n.length>i;)o(F,t=n[i++])||t==P||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===B,r=C(n?L:_(e)),i=[],s=0;r.length>s;)!o(F,t=r[s++])||n&&!o(B,t)||i.push(F[t]);return i};W||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(L,n),o(this,P)&&o(this[P],e)&&(this[P][e]=!1),z(this,e,x(1,n))};return i&&$&&z(B,e,{configurable:!0,set:t}),X(e)},a(I[N],"toString",function(){return this._k}),j.f=K,A.f=Q,n(59).f=S.f=Y,n(37).f=G,n(60).f=ee,i&&!n(35)&&a(B,"propertyIsEnumerable",G,!0),h.f=function(e){return X(d(e))}),s(s.G+s.W+s.F*!W,{Symbol:I});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)d(te[ne++]);for(var te=T(d.store),ne=0;te.length>ne;)g(te[ne++]);s(s.S+s.F*!W,"Symbol",{"for":function(e){return o(R,e+="")?R[e]:R[e]=I(e)},keyFor:function(e){if(J(e))return v(R,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){$=!0},useSimple:function(){$=!1}}),s(s.S+s.F*!W,"Object",{create:Z,defineProperty:Q,defineProperties:V,getOwnPropertyDescriptor:K,getOwnPropertyNames:Y,getOwnPropertySymbols:ee}),D&&s(s.S+s.F*(!W||c(function(){var e=I();return"[null]"!=q([e])||"{}"!=q({a:e})||"{}"!=q(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!J(e)){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);return t=r[1],"function"==typeof t&&(n=t),!n&&y(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!J(t))return t}),r[1]=t,q.apply(D,r)}}}),I[N][U]||n(14)(I[N],U,I[N].valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){n(44)("asyncIterator")},function(e,t,n){n(44)("observable")},function(e,t,n){n(129);for(var r=n(5),o=n(14),i=n(34),s=n(15)("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=a[u],l=r[c],f=l&&l.prototype;f&&!f[s]&&o(f,s,c),i[c]=i.Array}},function(e,t){var n={};t.escapeJavaScript=function(e){if(!e)return"";for(var t="",r=0,o=e.length;r<o;++r){var i=e.charCodeAt(r);t+=n.isSafe(i)?e[r]:n.escapeJavaScriptChar(i)}return t},t.escapeHtml=function(e){if(!e)return"";for(var t="",r=0,o=e.length;r<o;++r){var i=e.charCodeAt(r);t+=n.isSafe(i)?e[r]:n.escapeHtmlChar(i)}return t},n.escapeJavaScriptChar=function(e){if(e>=256)return"\\u"+n.padLeft(""+e,4);var t=new Buffer(String.fromCharCode(e),"ascii").toString("hex");return"\\x"+n.padLeft(t,2)},n.escapeHtmlChar=function(e){var t=n.namedHtml[e];if("undefined"!=typeof t)return t;if(e>=256)return"&#"+e+";";var r=new Buffer(String.fromCharCode(e),"ascii").toString("hex");return"&#x"+n.padLeft(r,2)+";"},n.padLeft=function(e,t){for(;e.length<t;)e="0"+e;return e},n.isSafe=function(e){return"undefined"!=typeof n.safeCharCodes[e]},n.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},n.safeCharCodes=function(){for(var e={},t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&(e[t]=null);return e}()},function(e,t,n){e.exports=n(143)},function(e,t,n){var r=n(160),o={defaultThreshold:16,maxIPv6Groups:8,categories:{valid:1,dnsWarn:7,rfc5321:15,cfws:31,deprecated:63,rfc5322:127,error:255},diagnoses:{valid:0,dnsWarnNoMXRecord:5,dnsWarnNoRecord:6,rfc5321TLD:9,rfc5321TLDNumeric:10,rfc5321QuotedString:11,rfc5321AddressLiteral:12,cfwsComment:17,cfwsFWS:18,deprecatedLocalPart:33,deprecatedFWS:34,deprecatedQTEXT:35,deprecatedQP:36,deprecatedComment:37,deprecatedCTEXT:38,deprecatedIPv6:39,deprecatedCFWSNearAt:49,rfc5322Domain:65,rfc5322TooLong:66,rfc5322LocalTooLong:67,rfc5322DomainTooLong:68,rfc5322LabelTooLong:69,rfc5322DomainLiteral:70,rfc5322DomainLiteralOBSDText:71,rfc5322IPv6GroupCount:72,rfc5322IPv62x2xColon:73,rfc5322IPv6BadCharacter:74,rfc5322IPv6MaxGroups:75,rfc5322IPv6ColonStart:76,rfc5322IPv6ColonEnd:77,errExpectingDTEXT:129,errNoLocalPart:130,errNoDomain:131,errConsecutiveDots:132,errATEXTAfterCFWS:133,errATEXTAfterQS:134,errATEXTAfterDomainLiteral:135,errExpectingQPair:136,errExpectingATEXT:137,errExpectingQTEXT:138,errExpectingCTEXT:139,errBackslashEnd:140,errDotStart:141,errDotEnd:142,errDomainHyphenStart:143,errDomainHyphenEnd:144,errUnclosedQuotedString:145,errUnclosedComment:146,errUnclosedDomainLiteral:147,errFWSCRLFx2:148,errFWSCRLFEnd:149,errCRNoLF:150,errUnknownTLD:160,errDomainTooShort:161},components:{localpart:0,domain:1,literal:2,contextComment:3,contextFWS:4,contextQuotedString:5,contextQuotedPair:6}};o.defer="undefined"!=typeof process&&process&&"function"==typeof process.nextTick?process.nextTick.bind(process):function(e){return setTimeout(e,0)};var i='()<>[]:;@\\,."',s=function(e){for(var t=new Array(256),n=255;n>=0;--n)t[n]=!1;for(var r=e.length;n<r;++n)t[e.charCodeAt(n)]=!0;var o="return function (code) {\n";return o+="  return lookup[code];\n",o+="}",new Function("lookup",o)(t)},a=s(i),u=/\b(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,c=/^[a-fA-F\d]{0,4}$/,l=c.test.bind(c),f=Object.prototype.hasOwnProperty,p=function(e,t,n){if("function"==typeof t&&(n=t,t={}),t||(t={}),"function"!=typeof n){if(t.checkDNS)throw new TypeError("expected callback function for checkDNS option");n=null}var i,s;if("number"==typeof t.errorLevel?(i=!0,s=t.errorLevel):(i=!!t.errorLevel,s=o.diagnoses.valid),t.tldWhitelist)if("string"==typeof t.tldWhitelist)t.tldWhitelist=[t.tldWhitelist];else if("object"!=typeof t.tldWhitelist)throw new TypeError("expected array or object tldWhitelist");if(t.minDomainAtoms&&(t.minDomainAtoms!==(0|+t.minDomainAtoms)||t.minDomainAtoms<0))throw new TypeError("expected positive integer minDomainAtoms");for(var c,p=o.diagnoses.valid,d=function(e){e>p&&(p=e)},h={now:o.components.localpart,prev:o.components.localpart,stack:[o.components.localpart]},g="",v=0,m={local:"",domain:""},y={locals:[""],domains:[""]},b=0,_=0,w=0,x=!1,k=!1,S=e.length,j=0,A=S;j<A;++j){switch(c=e[j],h.now){case o.components.localpart:switch(c){case"(":0===_?d(0===b?o.diagnoses.cfwsComment:o.diagnoses.deprecatedComment):(d(o.diagnoses.cfwsComment),k=!0),h.stack.push(h.now),h.now=o.components.contextComment;break;case".":0===_?d(0===b?o.diagnoses.errDotStart:o.diagnoses.errConsecutiveDots):(k&&d(o.diagnoses.deprecatedLocalPart),k=!1,_=0,++b,m.local+=c,y.locals[b]="");break;case'"':0===_?(d(0===b?o.diagnoses.rfc5321QuotedString:o.diagnoses.deprecatedLocalPart),m.local+=c,y.locals[b]+=c,++_,k=!0,h.stack.push(h.now),h.now=o.components.contextQuotedString):d(o.diagnoses.errExpectingATEXT);break;case"\r":if(S===++j||"\n"!==e[j]){d(o.diagnoses.errCRNoLF);
break}case" ":case"\t":0===_?d(0===b?o.diagnoses.cfwsFWS:o.diagnoses.deprecatedFWS):k=!0,h.stack.push(h.now),h.now=o.components.contextFWS,g=c;break;case"@":if(1!==h.stack.length)throw new Error("unexpected item on context stack");0===m.local.length?d(o.diagnoses.errNoLocalPart):0===_?d(o.diagnoses.errDotEnd):m.local.length>64?d(o.diagnoses.rfc5322LocalTooLong):h.prev!==o.components.contextComment&&h.prev!==o.components.contextFWS||d(o.diagnoses.deprecatedCFWSNearAt),h.now=o.components.domain,h.stack[0]=o.components.domain,b=0,_=0,k=!1;break;default:if(k)switch(h.prev){case o.components.contextComment:case o.components.contextFWS:d(o.diagnoses.errATEXTAfterCFWS);break;case o.components.contextQuotedString:d(o.diagnoses.errATEXTAfterQS);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+h.prev)}else h.prev=h.now,v=c.charCodeAt(0),(v<33||v>126||a(v))&&d(o.diagnoses.errExpectingATEXT),m.local+=c,y.locals[b]+=c,++_}break;case o.components.domain:switch(c){case"(":0===_?d(0===b?o.diagnoses.deprecatedCFWSNearAt:o.diagnoses.deprecatedComment):(k=!0,d(o.diagnoses.cfwsComment)),h.stack.push(h.now),h.now=o.components.contextComment;break;case".":0===_?d(0===b?o.diagnoses.errDotStart:o.diagnoses.errConsecutiveDots):x?d(o.diagnoses.errDomainHyphenEnd):_>63&&d(o.diagnoses.rfc5322LabelTooLong),k=!1,_=0,++b,y.domains[b]="",m.domain+=c;break;case"[":0===m.domain.length?(k=!0,++_,h.stack.push(h.now),h.now=o.components.literal,m.domain+=c,y.domains[b]+=c,m.literal=""):d(o.diagnoses.errExpectingATEXT);break;case"\r":if(S===++j||"\n"!==e[j]){d(o.diagnoses.errCRNoLF);break}case" ":case"\t":0===_?d(0===b?o.diagnoses.deprecatedCFWSNearAt:o.diagnoses.deprecatedFWS):(d(o.diagnoses.cfwsFWS),k=!0),h.stack.push(h.now),h.now=o.components.contextFWS,g=c;break;default:if(k)switch(h.prev){case o.components.contextComment:case o.components.contextFWS:d(o.diagnoses.errATEXTAfterCFWS);break;case o.components.literal:d(o.diagnoses.errATEXTAfterDomainLiteral);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+h.prev)}v=c.charCodeAt(0),x=!1,v<33||v>126||a(v)?d(o.diagnoses.errExpectingATEXT):"-"===c?(0===_&&d(o.diagnoses.errDomainHyphenStart),x=!0):(v<48||v>122||v>57&&v<65||v>90&&v<97)&&d(o.diagnoses.rfc5322Domain),m.domain+=c,y.domains[b]+=c,++_}break;case o.components.literal:switch(c){case"]":if(p<o.categories.deprecated){var T=-1,E=m.literal,O=u.exec(E);if(O&&(T=O.index,0!==T&&(E=E.slice(0,T)+"0:0")),0===T)d(o.diagnoses.rfc5321AddressLiteral);else if("ipv6:"!==E.slice(0,5).toLowerCase())d(o.diagnoses.rfc5322DomainLiteral);else{var C=E.slice(5),I=o.maxIPv6Groups,D=C.split(":");T=C.indexOf("::"),~T?T!==C.lastIndexOf("::")?d(o.diagnoses.rfc5322IPv62x2xColon):(0!==T&&T!==C.length-2||++I,D.length>I?d(o.diagnoses.rfc5322IPv6MaxGroups):D.length===I&&d(o.diagnoses.deprecatedIPv6)):D.length!==I&&d(o.diagnoses.rfc5322IPv6GroupCount),d(":"===C[0]&&":"!==C[1]?o.diagnoses.rfc5322IPv6ColonStart:":"===C[C.length-1]&&":"!==C[C.length-2]?o.diagnoses.rfc5322IPv6ColonEnd:D.every(l)?o.diagnoses.rfc5321AddressLiteral:o.diagnoses.rfc5322IPv6BadCharacter)}}else d(o.diagnoses.rfc5322DomainLiteral);m.domain+=c,y.domains[b]+=c,++_,h.prev=h.now,h.now=h.stack.pop();break;case"\\":d(o.diagnoses.rfc5322DomainLiteralOBSDText),h.stack.push(h.now),h.now=o.components.contextQuotedPair;break;case"\r":if(S===++j||"\n"!==e[j]){d(o.diagnoses.errCRNoLF);break}case" ":case"\t":d(o.diagnoses.cfwsFWS),h.stack.push(h.now),h.now=o.components.contextFWS,g=c;break;default:if(v=c.charCodeAt(0),v>127||0===v||"["===c){d(o.diagnoses.errExpectingDTEXT);break}(v<33||127===v)&&d(o.diagnoses.rfc5322DomainLiteralOBSDText),m.literal+=c,m.domain+=c,y.domains[b]+=c,++_}break;case o.components.contextQuotedString:switch(c){case"\\":h.stack.push(h.now),h.now=o.components.contextQuotedPair;break;case"\r":if(S===++j||"\n"!==e[j]){d(o.diagnoses.errCRNoLF);break}case"\t":m.local+=" ",y.locals[b]+=" ",++_,d(o.diagnoses.cfwsFWS),h.stack.push(h.now),h.now=o.components.contextFWS,g=c;break;case'"':m.local+=c,y.locals[b]+=c,++_,h.prev=h.now,h.now=h.stack.pop();break;default:v=c.charCodeAt(0),v>127||0===v||10===v?d(o.diagnoses.errExpectingQTEXT):(v<32||127===v)&&d(o.diagnoses.deprecatedQTEXT),m.local+=c,y.locals[b]+=c,++_}break;case o.components.contextQuotedPair:switch(v=c.charCodeAt(0),v>127?d(o.diagnoses.errExpectingQPair):(v<31&&9!==v||127===v)&&d(o.diagnoses.deprecatedQP),h.prev=h.now,h.now=h.stack.pop(),c="\\"+c,h.now){case o.components.contextComment:break;case o.components.contextQuotedString:m.local+=c,y.locals[b]+=c,_+=2;break;case o.components.literal:m.domain+=c,y.domains[b]+=c,_+=2;break;default:throw new Error("quoted pair logic invoked in an invalid context: "+h.now)}break;case o.components.contextComment:switch(c){case"(":h.stack.push(h.now),h.now=o.components.contextComment;break;case")":h.prev=h.now,h.now=h.stack.pop();break;case"\\":h.stack.push(h.now),h.now=o.components.contextQuotedPair;break;case"\r":if(S===++j||"\n"!==e[j]){d(o.diagnoses.errCRNoLF);break}case" ":case"\t":d(o.diagnoses.cfwsFWS),h.stack.push(h.now),h.now=o.components.contextFWS,g=c;break;default:if(v=c.charCodeAt(0),v>127||0===v||10===v){d(o.diagnoses.errExpectingCTEXT);break}(v<32||127===v)&&d(o.diagnoses.deprecatedCTEXT)}break;case o.components.contextFWS:if("\r"===g){if("\r"===c){d(o.diagnoses.errFWSCRLFx2);break}++w>1?d(o.diagnoses.deprecatedFWS):w=1}switch(c){case"\r":S!==++j&&"\n"===e[j]||d(o.diagnoses.errCRNoLF);break;case" ":case"\t":break;default:"\r"===g&&d(o.diagnoses.errFWSCRLFEnd),w=0,h.prev=h.now,h.now=h.stack.pop(),--j}g=c;break;default:throw new Error("unknown context: "+h.now)}if(p>o.categories.rfc5322)break}if(p<o.categories.rfc5322)if(h.now===o.components.contextQuotedString)d(o.diagnoses.errUnclosedQuotedString);else if(h.now===o.components.contextQuotedPair)d(o.diagnoses.errBackslashEnd);else if(h.now===o.components.contextComment)d(o.diagnoses.errUnclosedComment);else if(h.now===o.components.literal)d(o.diagnoses.errUnclosedDomainLiteral);else if("\r"===c)d(o.diagnoses.errFWSCRLFEnd);else if(0===m.domain.length)d(o.diagnoses.errNoDomain);else if(0===_)d(o.diagnoses.errDotEnd);else if(x)d(o.diagnoses.errDomainHyphenEnd);else if(m.domain.length>255)d(o.diagnoses.rfc5322DomainTooLong);else if(m.local.length+m.domain.length+1>254)d(o.diagnoses.rfc5322TooLong);else if(_>63)d(o.diagnoses.rfc5322LabelTooLong);else if(t.minDomainAtoms&&y.domains.length<t.minDomainAtoms)d(o.diagnoses.errDomainTooShort);else if(t.tldWhitelist){var q=y.domains[b];if(Array.isArray(t.tldWhitelist)){var N=!1;for(j=0,A=t.tldWhitelist.length;j<A;++j)if(q===t.tldWhitelist[j]){N=!0;break}N||d(o.diagnoses.errUnknownTLD)}else f.call(t.tldWhitelist,q)||d(o.diagnoses.errUnknownTLD)}var P=!1,U=!1,M=function(){if(!P&&p<o.categories.dnsWarn){var e=y.domains[b].charCodeAt(0);e<=57?d(o.diagnoses.rfc5321TLDNumeric):0===b&&d(o.diagnoses.rfc5321TLD)}p<s&&(p=o.diagnoses.valid);var t=i?p:p<o.defaultThreshold;return n&&(U?n(t):o.defer(n.bind(null,t))),t};if(!(t.checkDNS&&p<o.categories.dnsWarn)){var R=M();return U=!0,R}0===b&&(m.domain+=".");var F=m.domain;r.resolveMx(F,function(e,t){if(e&&e.code!==r.NODATA)return d(o.diagnoses.dnsWarnNoRecord),M();if(t&&t.length)return P=!0,M();var n=3,i=!1;d(o.diagnoses.dnsWarnNoMXRecord);var s=function(e,t){if(!i)return--n,t&&t.length?(i=!0,M()):void(0===n&&(d(o.diagnoses.dnsWarnNoRecord),i=!0,M()))};r.resolveCname(F,s),r.resolve4(F,s),r.resolve6(F,s)}),U=!0};p.diagnoses=function(){var e={};for(var t in o.diagnoses)e[t]=o.diagnoses[t];return e}(),e.exports=p},function(e,t,n){e.exports=n(148)},function(e,t,n){var r=n(2),o=n(21),i=n(3),s=n(1),a={};a.fastSplice=function(e,t){for(var n=e.length,r=t;r<n;)e[r++]=e[r];--e.length},a.Array=function(){r.call(this),this._type="array",this._inner.items=[],this._inner.inclusions=[],this._inner.exclusions=[],this._inner.requireds=[],this._flags.sparse=!1},s.inherits(a.Array,r),a.Array.prototype._base=function(e,t,n){var r={value:e};if("string"==typeof e&&n.convert)try{var o=JSON.parse(e);Array.isArray(o)&&(r.value=o)}catch(s){}var u=Array.isArray(r.value),c=u;if(n.convert&&this._flags.single&&!u&&(r.value=[r.value],u=!0),!u)return r.errors=i.create("array.base",null,t,n),r;if((this._inner.inclusions.length||this._inner.exclusions.length||!this._flags.sparse)&&(c&&(r.value=r.value.slice(0)),r.errors=a.checkItems.call(this,r.value,c,t,n),r.errors&&c&&n.convert&&this._flags.single)){var l=r.errors;r.value=[r.value],r.errors=a.checkItems.call(this,r.value,c,t,n),r.errors&&(r.errors=l,r.value=r.value[0])}return r},a.checkItems=function(e,t,n,r){for(var o,u=[],c=this._inner.requireds.slice(),l=this._inner.inclusions.slice(),f=0,p=e.length;f<p;++f){o=!1;var d=e[f],h=!1,g={key:f,path:(n.path?n.path+".":"")+f,parent:e,reference:n.reference};if(this._flags.sparse||void 0!==d){for(var v=0,m=this._inner.exclusions.length;v<m;++v){var y=this._inner.exclusions[v]._validate(d,g,{});if(!y.errors){if(u.push(i.create(t?"array.excludes":"array.excludesSingle",{pos:f,value:d},{key:n.key,path:g.path},r)),o=!0,r.abortEarly)return u;break}}if(!o){for(v=0,m=c.length;v<m;++v){var y=c[v]._validate(d,g,{});if(!y.errors){e[f]=y.value,h=!0,l.push(c[v]),a.fastSplice(c,v),--v,--m;break}}if(!h){for(v=0,m=l.length;v<m;++v){var y=l[v]._validate(d,g,r);if(!y.errors){l[v]._flags.strip?(a.fastSplice(e,f),--f,--p):e[f]=y.value,h=!0;break}if(r.stripUnknown){a.fastSplice(e,f),--f,--p,h=!0;break}if(1===m){if(u.push(i.create(t?"array.includesOne":"array.includesOneSingle",{pos:f,reason:y.errors,value:d},{key:n.key,path:g.path},r)),o=!0,r.abortEarly)return u;break}}if(!o&&this._inner.inclusions.length&&!h&&(u.push(i.create(t?"array.includes":"array.includesSingle",{pos:f,value:d},{key:n.key,path:g.path},r)),r.abortEarly))return u}}}else if(u.push(i.create("array.sparse",null,{key:n.key,path:g.path},r)),r.abortEarly)return u}if(c.length){for(var b=[],_=0,v=0,m=c.length;v<m;++v){var w=s.reach(c[v],"_settings.language.label");w?b.push(w):++_}b.length?_?u.push(i.create("array.includesRequiredBoth",{knownMisses:b,unknownMisses:_},{key:n.key,path:n.patk},r)):u.push(i.create("array.includesRequiredKnowns",{knownMisses:b},{key:n.key,path:n.path},r)):u.push(i.create("array.includesRequiredUnknowns",{unknownMisses:_},{key:n.key,path:n.path},r))}return u.length?u:null},a.Array.prototype.describe=function(){var e=r.prototype.describe.call(this);if(this._inner.items.length){e.items=[];for(var t=0,n=this._inner.items.length;t<n;++t)e.items.push(this._inner.items[t].describe())}return e},a.Array.prototype.items=function(){var e=this.clone();return s.flatten(Array.prototype.slice.call(arguments)).forEach(function(t){t=o.schema(t),e._inner.items.push(t),"required"===t._flags.presence?e._inner.requireds.push(t):"forbidden"===t._flags.presence?e._inner.exclusions.push(t.optional()):e._inner.inclusions.push(t)}),e},a.Array.prototype.min=function(e){return s.assert(s.isInteger(e)&&e>=0,"limit must be a positive integer"),this._test("min",e,function(t,n,r){return t.length>=e?null:i.create("array.min",{limit:e,value:t},n,r)})},a.Array.prototype.max=function(e){return s.assert(s.isInteger(e)&&e>=0,"limit must be a positive integer"),this._test("max",e,function(t,n,r){return t.length<=e?null:i.create("array.max",{limit:e,value:t},n,r)})},a.Array.prototype.length=function(e){return s.assert(s.isInteger(e)&&e>=0,"limit must be a positive integer"),this._test("length",e,function(t,n,r){return t.length===e?null:i.create("array.length",{limit:e,value:t},n,r)})},a.Array.prototype.unique=function(){return this._test("unique",void 0,function(e,t,n){for(var r={string:{},number:{},undefined:{},"boolean":{},object:[],"function":[]},o=0,a=e.length;o<a;++o){var u=e[o],c=typeof u,l=r[c];if(l)if(Array.isArray(l)){for(var f=0,p=l.length;f<p;++f)if(s.deepEqual(l[f],u))return i.create("array.unique",{pos:o,value:u},t,n);l.push(u)}else{if(l[u])return i.create("array.unique",{pos:o,value:u},t,n);l[u]=!0}}})},a.Array.prototype.sparse=function(e){var t=this.clone();return t._flags.sparse=void 0===e||!!e,t},a.Array.prototype.single=function(e){var t=this.clone();return t._flags.single=void 0===e||!!e,t},e.exports=new a.Array},function(e,t,n){var r=n(2),o=n(3),i=n(1),s={};s.Binary=function(){r.call(this),this._type="binary"},i.inherits(s.Binary,r),s.Binary.prototype._base=function(e,t,n){var r={value:e};if("string"==typeof e&&n.convert)try{var i=new Buffer(e,this._flags.encoding);r.value=i}catch(s){}return r.errors=Buffer.isBuffer(r.value)?null:o.create("binary.base",null,t,n),r},s.Binary.prototype.encoding=function(e){i.assert(Buffer.isEncoding(e),"Invalid encoding:",e);var t=this.clone();return t._flags.encoding=e,t},s.Binary.prototype.min=function(e){return i.assert(i.isInteger(e)&&e>=0,"limit must be a positive integer"),this._test("min",e,function(t,n,r){return t.length>=e?null:o.create("binary.min",{limit:e,value:t},n,r)})},s.Binary.prototype.max=function(e){return i.assert(i.isInteger(e)&&e>=0,"limit must be a positive integer"),this._test("max",e,function(t,n,r){return t.length<=e?null:o.create("binary.max",{limit:e,value:t},n,r)})},s.Binary.prototype.length=function(e){return i.assert(i.isInteger(e)&&e>=0,"limit must be a positive integer"),this._test("length",e,function(t,n,r){return t.length===e?null:o.create("binary.length",{limit:e,value:t},n,r)})},e.exports=new s.Binary},function(e,t,n){var r=n(2),o=n(3),i=n(1),s={};s.Function=function(){r.call(this),this._type="func"},i.inherits(s.Function,r),s.Function.prototype._base=function(e,t,n){return{value:e,errors:"function"==typeof e?null:o.create("function.base",null,t,n)}},e.exports=new s.Function},function(e,t,n){var r=(n(1),n(2)),o=n(21),i=n(22),s={alternatives:n(46),array:n(145),"boolean":n(65),binary:n(146),date:n(47),func:n(147),number:n(66),object:n(67),string:n(68)};s.root=function(){var e=new r,t=e.clone();return t.any=function(){return e},t.alternatives=t.alt=function(){return arguments.length?s.alternatives["try"].apply(s.alternatives,arguments):s.alternatives},t.array=function(){return s.array},t["boolean"]=t.bool=function(){return s["boolean"]},t.binary=function(){return s.binary},t.date=function(){return s.date},t.func=function(){return s.func},t.number=function(){return s.number},t.object=function(){return arguments.length?s.object.keys.apply(s.object,arguments):s.object},t.string=function(){return s.string},t.ref=function(){return i.create.apply(null,arguments)},t.isRef=function(e){return i.isRef(e)},t.validate=function(t){var n=arguments[arguments.length-1],r="function"==typeof n?n:null,i=arguments.length-(r?1:0);if(1===i)return e.validate(t,r);var s=3===i?arguments[2]:{},a=o.schema(arguments[1]);return a._validateWithOptions(t,s,r)},t.describe=function(){var t=arguments.length?o.schema(arguments[0]):e;return t.describe()},t.compile=function(e){return o.schema(e)},t.assert=function(e,n,r){r=r?r+" ":"";var o=t.validate(e,n).error;if(o)throw new Error(r+o.annotate())},t},e.exports=s.root()},function(e,t){t.errors={root:"value",key:'"{{key}}" ',messages:{wrapArrays:!0},any:{unknown:"is not allowed",invalid:"contains an invalid value",empty:"is not allowed to be empty",required:"is required",allowOnly:"must be one of {{valids}}","default":"threw an error when running default method"},alternatives:{base:"not matching any of the allowed alternatives"},array:{base:"must be an array",includes:"at position {{pos}} does not match any of the allowed types",includesSingle:'single value of "{{!key}}" does not match any of the allowed types',includesOne:"at position {{pos}} fails because {{reason}}",includesOneSingle:'single value of "{{!key}}" fails because {{reason}}',includesRequiredUnknowns:"does not contain {{unknownMisses}} required value(s)",includesRequiredKnowns:"does not contain {{knownMisses}}",includesRequiredBoth:"does not contain {{knownMisses}} and {{unknownMisses}} other required value(s)",excludes:"at position {{pos}} contains an excluded value",excludesSingle:'single value of "{{!key}}" contains an excluded value',min:"must contain at least {{limit}} items",max:"must contain less than or equal to {{limit}} items",length:"must contain {{limit}} items",sparse:"must not be a sparse array",unique:"position {{pos}} contains a duplicate value"},"boolean":{base:"must be a boolean"},binary:{base:"must be a buffer or a string",min:"must be at least {{limit}} bytes",max:"must be less than or equal to {{limit}} bytes",length:"must be {{limit}} bytes"},date:{base:"must be a number of milliseconds or valid date string",min:'must be larger than or equal to "{{limit}}"',max:'must be less than or equal to "{{limit}}"',isoDate:"must be a valid ISO 8601 date",ref:'references "{{ref}}" which is not a date'},"function":{base:"must be a Function"},object:{base:"must be an object",child:'child "{{key}}" fails because {{reason}}',min:"must have at least {{limit}} children",max:"must have less than or equal to {{limit}} children",length:"must have {{limit}} children",allowUnknown:"is not allowed","with":'missing required peer "{{peer}}"',without:'conflict with forbidden peer "{{peer}}"',missing:"must contain at least one of {{peers}}",xor:"contains a conflict between exclusive peers {{peers}}",or:"must contain at least one of {{peers}}",and:"contains {{present}} without its required peers {{missing}}",nand:'!!"{{main}}" must not exist simultaneously with {{peers}}',assert:'!!"{{ref}}" validation failed because "{{ref}}" failed to {{message}}',rename:{multiple:'cannot rename child "{{from}}" because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename child "{{from}}" because override is disabled and target "{{to}}" exists'},type:'must be an instance of "{{type}}"'},number:{base:"must be a number",min:"must be larger than or equal to {{limit}}",max:"must be less than or equal to {{limit}}",less:"must be less than {{limit}}",greater:"must be greater than {{limit}}","float":"must be a float or double",integer:"must be an integer",negative:"must be a negative number",positive:"must be a positive number",precision:"must have no more than {{limit}} decimal places",multiple:"must be a multiple of {{multiple}}"},string:{base:"must be a string",min:"length must be at least {{limit}} characters long",max:"length must be less than or equal to {{limit}} characters long",length:"length must be {{limit}} characters long",alphanum:"must only contain alpha-numeric characters",token:"must only contain alpha-numeric and underscore characters",regex:{base:'with value "{{value}}" fails to match the required pattern: {{pattern}}',name:'with value "{{value}}" fails to match the {{name}} pattern'},email:"must be a valid email",uri:"must be a valid uri",uriCustomScheme:"must be a valid uri with a scheme matching the {{scheme}} pattern",isoDate:"must be a valid ISO 8601 date",guid:"must be a valid GUID",hex:"must only contain hexadecimal characters",hostname:"must be a valid hostname",lowercase:"must only contain lowercase characters",uppercase:"must only contain uppercase characters",trim:"must not have leading or trailing whitespace",creditCard:"must be a credit card"}}},function(e,t){e.exports={_args:[["nodemailer-stub-transport@^1.0.0","/Users/sericaia/Documents/git/authzero/auth0-user-invite-extension"]],_from:"nodemailer-stub-transport@>=1.0.0 <2.0.0",_id:"nodemailer-stub-transport@1.0.0",_inCache:!0,_installable:!0,_location:"/nodemailer-stub-transport",_nodeVersion:"0.12.0",_npmUser:{email:"andris@node.ee",name:"andris"},_npmVersion:"2.5.1",_phantomChildren:{},_requested:{name:"nodemailer-stub-transport",raw:"nodemailer-stub-transport@^1.0.0",rawSpec:"^1.0.0",scope:null,spec:">=1.0.0 <2.0.0",type:"range"},_requiredBy:["#DEV:/"],_resolved:"https://registry.npmjs.org/nodemailer-stub-transport/-/nodemailer-stub-transport-1.0.0.tgz",_shasum:"abd30ddb9f65e4479679a034e067fede277119ac",_shrinkwrap:null,_spec:"nodemailer-stub-transport@^1.0.0",_where:"/Users/sericaia/Documents/git/authzero/auth0-user-invite-extension",author:{name:"Andris Reinman"},bugs:{url:"https://github.com/andris9/nodemailer-stub-transport/issues"},dependencies:{},description:"Stub transport for Nodemailer",devDependencies:{chai:"~2.2.0",grunt:"~0.4.5","grunt-contrib-jshint":"~0.11.1","grunt-mocha-test":"~0.12.7",sinon:"^1.14.1"},directories:{},dist:{shasum:"abd30ddb9f65e4479679a034e067fede277119ac",tarball:"https://registry.npmjs.org/nodemailer-stub-transport/-/nodemailer-stub-transport-1.0.0.tgz"},gitHead:"777f87428e7d3a6d7c1bdf420efb0952f74cc80a",homepage:"http://github.com/andris9/nodemailer-stub-transport",keywords:["Stub","Nodemailer"],license:"MIT",main:"src/stub-transport.js",maintainers:[{email:"andris@node.ee",name:"andris"}],name:"nodemailer-stub-transport",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git://github.com/andris9/nodemailer-stub-transport.git"},scripts:{test:"grunt"},version:"1.0.0"}},function(e,t){e.exports={title:"Invite Only Extension",name:"auth0-user-invite-extension",version:"1.0.0",author:"auth0",description:"This extension gives Auth0 customers the possibility to invite users to their connections.",type:"application",logoUrl:"https://cdn.auth0.com/extensions/auth0-user-invite-extension/assets/logo.svg",initialUrlPath:"/login",uninstallConfirmMessage:"Do you really want to uninstall this extension? Doing so will stop you from being able to invite users to your connections.",repository:"https://github.com/auth0-extensions/auth0-user-invite-extension",keywords:["auth0","extension"],auth0:{createClient:!0,onUninstallPath:"/.extensions/on-uninstall",scopes:"read:connections read:users create:users update:users"},secrets:{}}},function(e,t,n){const r=n(74),o=n(23),i=["max","maxAge","length","dispose","stale"];e.exports=function(e){const t=new r(o.pick(e,i)),n=e.load,s=e.hash,a=e.bypass,u=e.itemMaxAge,c=new Map;if(e.disable)return n;const l=function(){const e=o.toArray(arguments),r=e.slice(0,-1),i=e.slice(-1).pop(),l=this;var f;if(a&&a.apply(l,r))return n.apply(l,e);f=0!==r.length||s?s.apply(l,r):"_";var p=t.get(f);return p?i.apply(null,[null].concat(p)):void(c.get(f)?c.get(f).push(i):(c.set(f,[]),n.apply(l,r.concat(function(e){const n=o.toArray(arguments);if(!e){const s=n.slice(1);u?t.set(f,s,u.apply(l,r.concat(s))):t.set(f,s)}c.get(f).forEach(function(e){e.apply(null,n)}),c["delete"](f),i.apply(null,n)}))))};return l.keys=t.keys.bind(t),l},e.exports.sync=function(e){const t=new r(o.pick(e,i)),n=e.load,s=e.hash,a=e.disable,u=e.bypass,c=this,l=e.itemMaxAge;if(a)return n;const f=function(){var e=o.toArray(arguments);if(u&&u.apply(c,arguments))return n.apply(c,arguments);var r=s.apply(c,e),i=t.get(r);if(i)return i;const a=n.apply(c,e);return l?t.set(r,a,l.apply(c,e.concat([a]))):t.set(r,a),a};return f.keys=t.keys.bind(t),f}},function(e,t,n){"use strict";function r(e){i.call(this),this.options=e||{},this.name="Stub",this.version=o.version}var o=n(150),i=n(162).EventEmitter,s=n(76);e.exports=function(e){return new r(e)},s.inherits(r,i),r.prototype.send=function(e,t){if(this.options.error)return void setImmediate(function(){t(new Error(this.options.error))}.bind(this));var n=e.message.createReadStream(),r=[],o=0,i=e.data.envelope||e.message.getEnvelope();this._log("info","envelope",JSON.stringify(i)),this.emit("envelope",i),n.on("data",function(e){r.push(e),o+=e.length,this._log("verbose","message",e.toString()),this.emit("data",e.toString())}.bind(this)),n.on("end",function(){setImmediate(function(){var n=(e.message.getHeader("message-id")||"").replace(/[<>\s]/g,""),i=Buffer.concat(r,o),s={envelope:e.data.envelope||e.message.getEnvelope(),messageId:n,response:i};this._log("info","end","Processed <%s> (%sB)",n,i.length),this.emit("end",s),t(null,s)}.bind(this))}.bind(this))},r.prototype._log=function(){var e=Array.prototype.slice.call(arguments),t=(e.shift()||"INFO").toUpperCase(),n=e.shift()||"",r=s.format.apply(s,e);this.emit("log",{name:o.name,version:o.version,level:t,type:n,message:r})}},function(e,t,n){var r=n(1),o={};t=e.exports=o.Topo=function(){this._items=[],this.nodes=[]},o.Topo.prototype.add=function(e,t){var n=this;t=t||{};var o=[].concat(t.before||[]),i=[].concat(t.after||[]),s=t.group||"?",a=t.sort||0;r.assert(o.indexOf(s)===-1,"Item cannot come before itself:",s),r.assert(o.indexOf("?")===-1,"Item cannot come before unassociated items"),r.assert(i.indexOf(s)===-1,"Item cannot come after itself:",s),r.assert(i.indexOf("?")===-1,"Item cannot come after unassociated items"),[].concat(e).forEach(function(e,t){var r={seq:n._items.length,sort:a,before:o,after:i,group:s,node:e};n._items.push(r)});var u=this._sort();return r.assert(!u,"item","?"!==s?"added into group "+s:"","created a dependencies error"),this.nodes},o.Topo.prototype.merge=function(e){e=[].concat(e);for(var t=0,n=e.length;t<n;++t){var i=e[t];if(i)for(var s=0,a=i._items.length;s<a;++s){var u=r.shallow(i._items[s]);this._items.push(u)}}for(this._items.sort(o.mergeSort),s=0,a=this._items.length;s<a;++s)this._items[s].seq=s;var c=this._sort();return r.assert(!c,"merge created a dependencies error"),this.nodes},o.mergeSort=function(e,t){return e.sort===t.sort?0:e.sort<t.sort?-1:1},o.Topo.prototype._sort=function(){for(var e={},t={},n={},r=0,o=this._items.length;r<o;++r){var i=this._items[r],s=i.seq,a=i.group;e[a]=e[a]||[],e[a].push(s),t[s]=i.before;for(var u=i.after,c=0,l=u.length;c<l;++c)n[u[c]]=(n[u[c]]||[]).concat(s)}var f=Object.keys(t);for(r=0,o=f.length;r<o;++r){var p=f[r],d=[],h=Object.keys(t[p]);for(c=0,l=h.length;c<l;++c){a=t[p][h[c]],e[a]=e[a]||[];for(var g=0,v=e[a].length;g<v;++g)d.push(e[a][g])}t[p]=d}var m=Object.keys(n);for(r=0,o=m.length;r<o;++r)if(a=m[r],e[a])for(c=0,l=e[a].length;c<l;++c)p=e[a][c],t[p]=t[p].concat(n[a]);var y,b={};for(f=Object.keys(t),r=0,o=f.length;r<o;++r)for(p=f[r],y=t[p],c=0,l=y.length;c<l;++c)b[y[c]]=(b[y[c]]||[]).concat(p);var _={},w=[];for(r=0,o=this._items.length;r<o;++r){var x=r;if(b[r])for(x=null,c=0,l=this._items.length;c<l;++c)if(_[c]!==!0){b[c]||(b[c]=[]);for(var k=b[c].length,S=0,j=0,A=k;j<A;++j)w.indexOf(b[c][j])>=0&&++S;if(S===k){x=c;break}}null!==x&&(x=x.toString(),_[x]=!0,w.push(x))}if(w.length!==this._items.length)return new Error("Invalid dependencies");var T={};for(r=0,o=this._items.length;r<o;++r)i=this._items[r],T[i.seq]=i;var E=[];this._items=w.map(function(e){var t=T[e];return E.push(t.node),t}),this.nodes=E}},function(e,t,n){var r=n(48).randomBytes;e.exports=function(){return r(16)}},function(e,t,n){function r(e,t,n){var r=t&&n||0,o=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){o<16&&(t[r+o++]=c[e])});o<16;)t[r+o++]=0;return t}function o(e,t){var n=t||0,r=u;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function i(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var s=void 0!==e.clockseq?e.clockseq:d,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:g+1,c=a-h+(u-g)/1e4;if(c<0&&void 0===e.clockseq&&(s=s+1&16383),(c<0||a>h)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=a,g=u,d=s,a+=122192928e5;var l=(1e4*(268435455&a)+u)%4294967296;i[r++]=l>>>24&255,i[r++]=l>>>16&255,i[r++]=l>>>8&255,i[r++]=255&l;var f=a/4294967296*1e4&268435455;i[r++]=f>>>8&255,i[r++]=255&f,i[r++]=f>>>24&15|16,i[r++]=f>>>16&255,i[r++]=s>>>8|128,i[r++]=255&s;for(var v=e.node||p,m=0;m<6;m++)i[r+m]=v[m];return t?t:o(i)}function s(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var s=0;s<16;s++)t[r+s]=i[s];return t||o(i)}for(var a=n(155),u=[],c={},l=0;l<256;l++)u[l]=(l+256).toString(16).substr(1),c[u[l]]=l;var f=a(),p=[1|f[0],f[1],f[2],f[3],f[4],f[5]],d=16383&(f[6]<<8|f[7]),h=0,g=0,v=s;v.v1=i,v.v4=s,v.parse=r,v.unparse=o,e.exports=v},function(e,t){e.exports=require("auth0")},function(e,t){e.exports=require("auth0@2.0.0")},function(e,t){e.exports=require("csv")},function(e,t){e.exports=require("dns")},function(e,t){e.exports=require("each-async")},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("express-jwt")},function(e,t){e.exports=require("jade")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("ms")},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("nodemailer")},function(e,t){e.exports=require("request")},function(e,t){e.exports=require("request-promise")},function(e,t){e.exports=require("superagent")},function(e,t){e.exports=require("webtask-tools")},function(e,t){e.exports=require("winston")}]);